<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electric Charge - Interactive Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 1.2rem;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .nav-tab {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 15px 25px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .nav-tab.active {
            background: #4299e1;
            color: white;
            transform: translateY(-2px);
        }

        .nav-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .tab-content.active {
            display: block;
        }

        .experiment-area {
            background: #f7fafc;
            border: 3px dashed #4299e1;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
            min-height: 300px;
            position: relative;
        }

        /* Enhanced Experiment Styles */
        .experiment-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .experiment-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .experiment-btn.active {
            background: linear-gradient(45deg, #4299e1, #3182ce);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .experiment-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .experiment-container {
            display: none;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .experiment-container.active {
            display: block;
        }

        .experiment-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .experiment-header h3 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .physics-lab {
            position: relative;
            background: linear-gradient(135deg, #1a202c, #2d3748);
            border-radius: 15px;
            height: 400px;
            margin: 20px 0;
            overflow: hidden;
            border: 3px solid #4a5568;
        }

        #forceCanvas {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
        }

        .lab-object {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            cursor: grab;
            user-select: none;
            transition: all 0.3s ease;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 0.7rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .lab-object:active {
            cursor: grabbing;
            transform: scale(1.1);
        }

        .lab-object.positive {
            background: radial-gradient(circle, #ff6b6b, #e55656);
            color: white;
            border: 3px solid #ff4757;
        }

        .lab-object.negative {
            background: radial-gradient(circle, #4ecdc4, #45b7b8);
            color: white;
            border: 3px solid #26d0ce;
        }

        .lab-object.neutral {
            background: radial-gradient(circle, #95a5a6, #7f8c8d);
            color: white;
            border: 3px solid #6c7b7f;
        }

        .object-icon {
            font-size: 1.2rem;
            margin-bottom: 2px;
        }

        .object-label {
            font-size: 0.6rem;
            margin-bottom: 2px;
        }

        .charge-indicator {
            font-size: 0.8rem;
            font-weight: bold;
        }

        .control-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            flex-wrap: wrap;
            gap: 10px;
        }

        .distance-meter, .force-meter {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
        }

        .force-bar {
            width: 100px;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .force-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            width: 0%;
            transition: width 0.3s ease;
        }

        .control-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: #3182ce;
            transform: translateY(-1px);
        }

        /* Electroscope Lab Styles */
        .electroscope-lab {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 40px;
            margin: 20px 0;
        }

        .digital-electroscope {
            flex: 1;
            text-align: center;
        }

        .scope-body {
            width: 150px;
            height: 200px;
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border: 3px solid #4a5568;
            border-radius: 10px;
            margin: 0 auto;
            position: relative;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .scope-rod {
            width: 4px;
            height: 120px;
            background: #2d3748;
            position: absolute;
            left: 50%;
            top: 20px;
            transform: translateX(-50%);
        }

        .scope-leaves {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
        }

        .leaf {
            width: 2px;
            height: 30px;
            background: #ffd700;
            position: absolute;
            bottom: 0;
            transition: all 0.5s ease;
            transform-origin: bottom;
        }

        .left-leaf {
            left: -1px;
        }

        .right-leaf {
            right: -1px;
        }

        .charge-display {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3748;
            color: #4ade80;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: bold;
            font-family: monospace;
        }

        .test-objects {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .test-object {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border-radius: 10px;
            cursor: grab;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        .test-object.positive {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
        }

        .test-object.negative {
            background: linear-gradient(45deg, #4ecdc4, #6bcf7f);
            color: white;
        }

        .test-object.neutral {
            background: linear-gradient(45deg, #95a5a6, #bdc3c7);
            color: white;
        }

        .test-object:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .test-icon {
            font-size: 1.5rem;
        }

        .readings-panel {
            display: flex;
            justify-content: space-around;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .reading {
            display: flex;
            flex-direction: column;
            text-align: center;
            gap: 5px;
        }

        .reading span:first-child {
            font-weight: bold;
            color: #4a5568;
        }

        .reading span:last-child {
            font-size: 1.2rem;
            color: #2b6cb0;
            font-weight: bold;
        }

        /* Neutralization Lab Styles */
        .neutralization-lab {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .charge-container {
            flex: 1;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .positive-container {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
        }

        .negative-container {
            background: linear-gradient(135deg, #4ecdc4, #6bcf7f);
            color: white;
        }

        .charge-particles {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            margin: 15px 0;
            min-height: 100px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .charge-particle {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            transition: all 0.5s ease;
        }

        .positive-particle {
            background: #ff4757;
            box-shadow: 0 0 10px #ff4757;
        }

        .negative-particle {
            background: #26d0ce;
            box-shadow: 0 0 10px #26d0ce;
        }

        .neutralization-zone {
            text-align: center;
            padding: 20px;
        }

        .neutralize-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .neutralize-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .result-display {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .charge-count {
            font-weight: bold;
            margin-top: 10px;
            font-size: 1.1rem;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        /* Enhanced Induction Experiment Styles */
        .induction-guide {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .guide-step {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: #f7fafc;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 200px;
        }

        .guide-step.active {
            background: linear-gradient(45deg, #4299e1, #63b3ed);
            color: white;
            border-color: #3182ce;
            transform: scale(1.02);
        }

        .step-number {
            background: white;
            color: #4299e1;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .guide-step.active .step-number {
            background: #2d3748;
            color: white;
        }

        .induction-lab-new {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #cbd5e0;
        }

        .induction-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .rod-selector, .distance-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rod-selector label, .distance-control label {
            font-weight: bold;
            color: #2d3748;
        }

        .rod-btn {
            background: linear-gradient(45deg, #95a5a6, #bdc3c7);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .rod-btn.active {
            background: linear-gradient(45deg, #e74c3c, #ff6b6b);
            transform: scale(1.05);
        }

        .rod-btn.negative.active {
            background: linear-gradient(45deg, #3498db, #4ecdc4);
        }

        #distanceSlider {
            width: 150px;
            height: 8px;
            border-radius: 4px;
            background: #e2e8f0;
            outline: none;
            cursor: pointer;
        }

        #distanceSlider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4299e1;
            cursor: pointer;
        }

        #distanceDisplay {
            font-weight: bold;
            color: #4299e1;
            min-width: 50px;
        }

        .induction-demo-area {
            position: relative;
            height: 400px;
            background: linear-gradient(135deg, #2d3748, #4a5568);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .field-lines {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            opacity: 0.7;
        }

        .demo-rod {
            position: absolute;
            top: 50%;
            left: 50px;
            transform: translateY(-50%);
            z-index: 10;
            transition: all 0.5s ease;
        }

        .rod-body {
            width: 120px;
            height: 30px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .demo-rod .rod-body {
            background: linear-gradient(45deg, #e74c3c, #ff6b6b);
        }

        .demo-rod .rod-body.negative {
            background: linear-gradient(45deg, #3498db, #4ecdc4);
        }

        .rod-label {
            font-size: 0.9rem;
        }

        .rod-charges {
            position: absolute;
            top: -10px;
            left: 0;
            width: 100%;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-around;
            pointer-events: none;
        }

        .rod-charge {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .rod-charge.positive {
            background: #ff4757;
        }

        .rod-charge.negative {
            background: #26d0ce;
        }

        .demo-objects {
            position: absolute;
            right: 50px;
            top: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 10;
        }

        .demo-object {
            background: white;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.5s ease;
            min-width: 200px;
        }

        .object-title {
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
            color: #2d3748;
            font-size: 0.9rem;
        }

        .object-body {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            position: relative;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .conductor {
            background: linear-gradient(45deg, #95a5a6, #bdc3c7);
            display: flex;
            justify-content: space-between;
        }

        .charge-region {
            flex: 1;
            text-align: center;
            position: relative;
        }

        .region-label {
            font-size: 0.7rem;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .charge-display {
            display: flex;
            justify-content: center;
            gap: 3px;
            flex-wrap: wrap;
        }

        .conductor-charge {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            transition: all 0.5s ease;
        }

        .conductor-charge.positive {
            background: #e74c3c;
        }

        .conductor-charge.negative {
            background: #3498db;
        }

        .insulator {
            background: linear-gradient(45deg, #f39c12, #f1c40f);
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
            align-items: center;
        }

        .molecule {
            display: flex;
            align-items: center;
            gap: 2px;
            transition: all 0.5s ease;
        }

        .atom-pos, .atom-neg {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            font-weight: bold;
            color: white;
        }

        .atom-pos {
            background: #e74c3c;
        }

        .atom-neg {
            background: #3498db;
        }

        .paper {
            background: linear-gradient(45deg, #ecf0f1, #bdc3c7);
            display: flex;
            justify-content: center;
            gap: 10px;
            align-items: center;
        }

        .paper-bit {
            display: flex;
            align-items: center;
            gap: 2px;
            transition: all 0.5s ease;
        }

        .paper-side {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            background: #95a5a6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
            transition: all 0.5s ease;
        }

        .object-status {
            text-align: center;
            font-size: 0.8rem;
            color: #718096;
            margin-top: 5px;
            font-weight: bold;
        }

        .induction-explanation {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .explanation-content h4 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .explanation-content p {
            color: #4a5568;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .key-points {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .key-point {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 150px;
        }

        .point-icon {
            font-size: 1.2rem;
        }

        .force-meter-induction {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .meter-label {
            font-weight: bold;
            color: #2d3748;
        }

        .meter-bar {
            flex: 1;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
        }

        .meter-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            width: 0%;
            transition: width 0.5s ease;
        }

        .meter-value {
            font-weight: bold;
            color: #38a169;
            min-width: 40px;
        }

        .animation-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* Field line animations */
        .field-line {
            stroke: #ffd700;
            stroke-width: 2;
            fill: none;
            opacity: 0.6;
            animation: fieldFlow 2s ease-in-out infinite;
        }

        @keyframes fieldFlow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Attraction animations */
        .attracted {
            transform: translateX(-10px) scale(1.05);
        }

        .polarized .left-region {
            background: rgba(52, 152, 219, 0.3);
        }

        .polarized .right-region {
            background: rgba(231, 76, 60, 0.3);
        }

        .oriented .molecule {
            transform: rotate(-15deg);
        }

        /* Observations Panel */
        .observations-panel {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .observations-panel h3 {
            color: #2d3748;
            margin-bottom: 15px;
            text-align: center;
        }

        .observation-feed {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .observation-item {
            padding: 8px 12px;
            margin: 5px 0;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
            font-size: 0.9rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            animation: slideIn 0.3s ease;
        }

        .observation-item.important {
            border-left-color: #e53e3e;
            background: #fed7d7;
        }

        .observation-item.success {
            border-left-color: #38a169;
            background: #c6f6d5;
        }

        .clear-btn {
            background: #e53e3e;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            float: right;
        }

        .clear-btn:hover {
            background: #c53030;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .pulse {
            animation: pulse 0.6s ease-in-out;
        }

        .electroscope {
            width: 200px;
            height: 300px;
            margin: 20px auto;
            position: relative;
            background: #ecf0f1;
            border: 2px solid #34495e;
            border-radius: 10px;
        }

        .electroscope-rod {
            width: 6px;
            height: 200px;
            background: #34495e;
            margin: 20px auto;
            position: relative;
        }

        .electroscope-knob {
            width: 30px;
            height: 30px;
            background: #f39c12;
            border-radius: 50%;
            position: absolute;
            top: -15px;
            left: -12px;
        }

        .gold-leaf {
            width: 2px;
            height: 40px;
            background: #f1c40f;
            position: absolute;
            bottom: 10px;
            transition: all 0.5s ease;
            transform-origin: top;
        }

        .gold-leaf.left {
            left: -5px;
        }

        .gold-leaf.right {
            right: -5px;
        }

        .concept-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .concept-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .quiz-question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #4299e1;
        }

        .quiz-option {
            display: block;
            background: white;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            border-color: #4299e1;
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .particle-container {
            position: relative;
            height: 200px;
            background: #2c3e50;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            transition: all 1s ease;
        }

        .electron {
            background: #3498db;
        }

        .proton {
            background: #e74c3c;
        }

        .btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4299e1, #667eea);
            width: 0%;
            transition: width 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(66, 153, 225, 0.5); }
            50% { box-shadow: 0 0 20px rgba(66, 153, 225, 0.8); }
        }

        .glow {
            animation: glow 1s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚡ Electric Charge Explorer</h1>
            <p>Discover the fascinating world of electrostatics through interactive experiments!</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('theory')">📚 Theory</button>
            <button class="nav-tab" onclick="showTab('experiments')">🔬 Experiments</button>
            <button class="nav-tab" onclick="showTab('electroscope')">⚖️ Electroscope</button>
            <button class="nav-tab" onclick="showTab('atoms')">⚛️ Atomic View</button>
            <button class="nav-tab" onclick="showTab('quiz')">🎯 Quiz</button>
        </div>

        <!-- Theory Tab -->
        <div id="theory" class="tab-content active">
            <h2>🌟 Understanding Electric Charge</h2>
            
            <div class="concept-card">
                <h3>Historical Discovery</h3>
                <p>Around 600 BC, Thales of Miletus discovered that amber (elektron in Greek) rubbed with wool attracts light objects. This gave us the word "electricity"!</p>
            </div>

            <div class="concept-card">
                <h3>Two Types of Charge</h3>
                <p>Benjamin Franklin named the two types of charges:</p>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>Positive (+):</strong> Glass rod rubbed with silk, Cat's fur</li>
                    <li><strong>Negative (-):</strong> Plastic rod rubbed with fur, Silk cloth</li>
                </ul>
            </div>

            <div class="concept-card">
                <h3>Fundamental Laws</h3>
                <p style="font-size: 1.2rem; text-align: center;">
                    <strong>Like charges REPEL 🔄</strong><br>
                    <strong>Unlike charges ATTRACT ➡️⬅️</strong>
                </p>
            </div>

            <div class="concept-card">
                <h3>What Really Happens?</h3>
                <p>When objects are rubbed together, electrons (negative charge) transfer from one object to another. The object losing electrons becomes positive, and the object gaining electrons becomes negative. No charge is created or destroyed!</p>
            </div>
        </div>

        <!-- Experiments Tab -->
        <div id="experiments" class="tab-content">
            <h2>🔬 Interactive Charge Experiments</h2>
            
            <!-- Experiment Selection -->
            <div class="experiment-selector">
                <button class="experiment-btn active" onclick="switchExperiment('basic')">
                    🎯 Basic Forces
                </button>
                <button class="experiment-btn" onclick="switchExperiment('electroscope')">
                    📏 Electroscope Test
                </button>
                <button class="experiment-btn" onclick="switchExperiment('neutralization')">
                    ⚖️ Neutralization
                </button>
                <button class="experiment-btn" onclick="switchExperiment('induction')">
                    🌊 Induction
                </button>
            </div>

            <!-- Basic Forces Experiment -->
            <div id="basicExperiment" class="experiment-container active">
                <div class="experiment-header">
                    <h3>🎯 Experiment 1: Basic Charge Forces</h3>
                    <p>Drag objects near each other to see attraction and repulsion forces!</p>
                </div>
                
                <div class="physics-lab" id="physicsLab">
                    <canvas id="forceCanvas" width="800" height="400"></canvas>
                    
                    <!-- Draggable charged objects -->
                    <div class="lab-object positive" data-charge="positive" data-strength="3" id="glassRod">
                        <div class="object-icon">🔬</div>
                        <div class="object-label">Glass Rod</div>
                        <div class="charge-indicator">+++</div>
                    </div>
                    
                    <div class="lab-object negative" data-charge="negative" data-strength="3" id="plasticRod">
                        <div class="object-icon">🧪</div>
                        <div class="object-label">Plastic Rod</div>
                        <div class="charge-indicator">---</div>
                    </div>
                    
                    <div class="lab-object positive" data-charge="positive" data-strength="2" id="catFur">
                        <div class="object-icon">🐱</div>
                        <div class="object-label">Cat's Fur</div>
                        <div class="charge-indicator">++</div>
                    </div>
                    
                    <div class="lab-object negative" data-charge="negative" data-strength="2" id="silkCloth">
                        <div class="object-icon">🧵</div>
                        <div class="object-label">Silk Cloth</div>
                        <div class="charge-indicator">--</div>
                    </div>

                    <div class="lab-object neutral" data-charge="neutral" data-strength="0" id="paperBits">
                        <div class="object-icon">📄</div>
                        <div class="object-label">Paper Bits</div>
                        <div class="charge-indicator">0</div>
                    </div>
                </div>
                
                <div class="control-panel">
                    <div class="distance-meter">
                        <span>Distance: </span>
                        <span id="distanceValue">-- cm</span>
                    </div>
                    <div class="force-meter">
                        <span>Force: </span>
                        <div class="force-bar">
                            <div class="force-fill" id="forceFill"></div>
                        </div>
                        <span id="forceValue">0</span>
                    </div>
                    <button class="control-btn" onclick="resetExperiment()">🔄 Reset</button>
                    <button class="control-btn" onclick="autoDemo()">🎬 Auto Demo</button>
                </div>
            </div>

            <!-- Electroscope Test Experiment -->
            <div id="electroscopeExperiment" class="experiment-container">
                <div class="experiment-header">
                    <h3>📏 Experiment 2: Testing with Electroscope</h3>
                    <p>Bring charged objects near the electroscope to detect charge without contact!</p>
                </div>
                
                <div class="electroscope-lab">
                    <div class="digital-electroscope">
                        <div class="scope-body">
                            <div class="scope-rod"></div>
                            <div class="scope-leaves" id="scopeLeaves">
                                <div class="leaf left-leaf"></div>
                                <div class="leaf right-leaf"></div>
                            </div>
                            <div class="charge-display" id="chargeDisplay">0</div>
                        </div>
                    </div>
                    
                    <div class="test-objects">
                        <div class="test-object positive" data-charge="positive" draggable="true">
                            <span class="test-icon">⚡</span>
                            <span>Charged Rod (+)</span>
                        </div>
                        <div class="test-object negative" data-charge="negative" draggable="true">
                            <span class="test-icon">⚡</span>
                            <span>Charged Rod (-)</span>
                        </div>
                        <div class="test-object neutral" data-charge="neutral" draggable="true">
                            <span class="test-icon">📏</span>
                            <span>Neutral Rod</span>
                        </div>
                    </div>
                </div>
                
                <div class="readings-panel">
                    <div class="reading">
                        <span>Leaf Angle:</span>
                        <span id="leafAngle">0°</span>
                    </div>
                    <div class="reading">
                        <span>Charge Level:</span>
                        <span id="chargeLevel">None</span>
                    </div>
                </div>
            </div>

            <!-- Neutralization Experiment -->
            <div id="neutralizationExperiment" class="experiment-container">
                <div class="experiment-header">
                    <h3>⚖️ Experiment 3: Charge Neutralization</h3>
                    <p>Watch what happens when opposite charges meet!</p>
                </div>
                
                <div class="neutralization-lab">
                    <div class="charge-container positive-container">
                        <h4>Positive Charges</h4>
                        <div class="charge-particles" id="positiveCharges"></div>
                        <div class="charge-count">Count: <span id="positiveCount">10</span></div>
                    </div>
                    
                    <div class="neutralization-zone">
                        <button class="neutralize-btn" onclick="startNeutralization()">
                            ⚡ Bring Together ⚡
                        </button>
                        <div class="result-display" id="neutralizationResult"></div>
                    </div>
                    
                    <div class="charge-container negative-container">
                        <h4>Negative Charges</h4>
                        <div class="charge-particles" id="negativeCharges"></div>
                        <div class="charge-count">Count: <span id="negativeCount">8</span></div>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="control-btn" onclick="adjustCharges('positive', 1)">+ Add Positive</button>
                    <button class="control-btn" onclick="adjustCharges('positive', -1)">- Remove Positive</button>
                    <button class="control-btn" onclick="adjustCharges('negative', 1)">+ Add Negative</button>
                    <button class="control-btn" onclick="adjustCharges('negative', -1)">- Remove Negative</button>
                    <button class="control-btn" onclick="resetNeutralization()">🔄 Reset</button>
                </div>
            </div>

            <!-- Induction Experiment -->
            <div id="inductionExperiment" class="experiment-container">
                <div class="experiment-header">
                    <h3>🌊 Experiment 4: Electrostatic Induction</h3>
                    <p>See how a charged object can influence neutral objects without touching them!</p>
                </div>
                
                <div class="induction-guide">
                    <div class="guide-step active" id="step1">
                        <span class="step-number">1</span>
                        <span>Start: Neutral objects have equal + and - charges</span>
                    </div>
                    <div class="guide-step" id="step2">
                        <span class="step-number">2</span>
                        <span>Approach: Charged rod creates electric field</span>
                    </div>
                    <div class="guide-step" id="step3">
                        <span class="step-number">3</span>
                        <span>Induction: Charges separate inside neutral object</span>
                    </div>
                    <div class="guide-step" id="step4">
                        <span class="step-number">4</span>
                        <span>Result: Attraction occurs (opposite charges closer)</span>
                    </div>
                </div>

                <div class="induction-lab-new">
                    <!-- Control Panel -->
                    <div class="induction-controls">
                        <div class="rod-selector">
                            <label>Choose charged rod:</label>
                            <button class="rod-btn active" onclick="selectRod('positive')" id="posRodBtn">
                                ⚡ Positive Rod
                            </button>
                            <button class="rod-btn" onclick="selectRod('negative')" id="negRodBtn">
                                ⚡ Negative Rod
                            </button>
                        </div>
                        
                        <div class="distance-control">
                            <label>Distance from object:</label>
                            <input type="range" id="distanceSlider" min="10" max="200" value="200" 
                                   oninput="updateInductionDistance(this.value)">
                            <span id="distanceDisplay">20 cm</span>
                        </div>
                    </div>

                    <!-- Visual Demonstration Area -->
                    <div class="induction-demo-area">
                        <!-- Electric Field Lines -->
                        <svg class="field-lines" id="fieldLines" width="100%" height="100%">
                            <!-- Field lines will be drawn here -->
                        </svg>
                        
                        <!-- Charged Rod -->
                        <div class="demo-rod" id="demoRod">
                            <div class="rod-body" id="rodBody">
                                <span class="rod-label">Positive Rod</span>
                                <div class="rod-charges" id="rodCharges">
                                    <!-- Charges will be added here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Neutral Objects -->
                        <div class="demo-objects">
                            <div class="demo-object" id="demoObject1">
                                <div class="object-title">Conductor (Metal)</div>
                                <div class="object-body conductor">
                                    <div class="charge-region left-region" id="leftRegion1">
                                        <div class="region-label">Left Side</div>
                                        <div class="charge-display" id="leftCharges1"></div>
                                    </div>
                                    <div class="charge-region right-region" id="rightRegion1">
                                        <div class="region-label">Right Side</div>
                                        <div class="charge-display" id="rightCharges1"></div>
                                    </div>
                                </div>
                                <div class="object-status" id="status1">Neutral (balanced)</div>
                            </div>
                            
                            <div class="demo-object" id="demoObject2">
                                <div class="object-title">Insulator (Plastic)</div>
                                <div class="object-body insulator">
                                    <div class="molecule" id="mol1"><span class="atom-pos">+</span><span class="atom-neg">-</span></div>
                                    <div class="molecule" id="mol2"><span class="atom-pos">+</span><span class="atom-neg">-</span></div>
                                    <div class="molecule" id="mol3"><span class="atom-pos">+</span><span class="atom-neg">-</span></div>
                                    <div class="molecule" id="mol4"><span class="atom-pos">+</span><span class="atom-neg">-</span></div>
                                </div>
                                <div class="object-status" id="status2">Neutral (molecules aligned)</div>
                            </div>
                            
                            <div class="demo-object" id="demoObject3">
                                <div class="object-title">Paper Bits</div>
                                <div class="object-body paper">
                                    <div class="paper-bit" id="paper1">
                                        <span class="paper-side left-side" id="paperLeft1">⚫</span>
                                        <span class="paper-side right-side" id="paperRight1">⚫</span>
                                    </div>
                                    <div class="paper-bit" id="paper2">
                                        <span class="paper-side left-side" id="paperLeft2">⚫</span>
                                        <span class="paper-side right-side" id="paperRight2">⚫</span>
                                    </div>
                                </div>
                                <div class="object-status" id="status3">Ready to be attracted</div>
                            </div>
                        </div>
                    </div>

                    <!-- Explanation Panel -->
                    <div class="induction-explanation">
                        <div class="explanation-content" id="inductionExplanationNew">
                            <h4>🔍 What's Happening:</h4>
                            <p>Position: Rod is far away. Objects are neutral with equal positive and negative charges distributed evenly.</p>
                            
                            <div class="key-points">
                                <div class="key-point">
                                    <span class="point-icon">⚡</span>
                                    <span><strong>Electric Field:</strong> Not reaching objects</span>
                                </div>
                                <div class="key-point">
                                    <span class="point-icon">⚖️</span>
                                    <span><strong>Charge Distribution:</strong> Uniform in all objects</span>
                                </div>
                                <div class="key-point">
                                    <span class="point-icon">🎯</span>
                                    <span><strong>Force:</strong> No attraction or repulsion</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="force-meter-induction">
                            <div class="meter-label">Attractive Force:</div>
                            <div class="meter-bar">
                                <div class="meter-fill" id="inductionForceMeter"></div>
                            </div>
                            <div class="meter-value" id="inductionForceValue">0%</div>
                        </div>
                    </div>
                </div>

                <!-- Animation Controls -->
                <div class="animation-controls">
                    <button class="control-btn" onclick="playInductionAnimation()">🎬 Play Animation</button>
                    <button class="control-btn" onclick="stepByStep()">📚 Step-by-Step Guide</button>
                    <button class="control-btn" onclick="resetInductionDemo()">🔄 Reset Demo</button>
                    <button class="control-btn" onclick="toggleField()">👀 Toggle Field Lines</button>
                </div>
            </div>

            <!-- Live Observations Panel -->
            <div class="observations-panel">
                <h3>📊 Live Observations</h3>
                <div class="observation-feed" id="observationFeed">
                    <div class="observation-item">🎯 Ready to start experiments!</div>
                </div>
                <button class="clear-btn" onclick="clearObservations()">Clear</button>
            </div>
        </div>

        <!-- Electroscope Tab -->
        <div id="electroscope" class="tab-content">
            <h2>⚖️ Gold-Leaf Electroscope</h2>
            <p>The electroscope detects electric charge. Watch the gold leaves diverge when charge is present!</p>
            
            <div style="text-align: center;">
                <div class="electroscope" id="electroscopeDevice">
                    <div class="electroscope-rod">
                        <div class="electroscope-knob" id="electroscopeKnob"></div>
                        <div class="gold-leaf left" id="leftLeaf"></div>
                        <div class="gold-leaf right" id="rightLeaf"></div>
                    </div>
                </div>
                
                <div style="margin: 20px 0;">
                    <button class="btn" onclick="chargeElectroscope('positive')">Touch with Positive Rod</button>
                    <button class="btn" onclick="chargeElectroscope('negative')">Touch with Negative Rod</button>
                    <button class="btn" onclick="dischargeElectroscope()">Discharge</button>
                </div>
                
                <div class="concept-card">
                    <h3>How it works:</h3>
                    <p>When a charged object touches the metal knob, charge flows to the gold leaves. Since both leaves get the same type of charge, they repel each other and diverge. The more charge, the greater the divergence!</p>
                </div>
            </div>
        </div>

        <!-- Atomic View Tab -->
        <div id="atoms" class="tab-content">
            <h2>⚛️ Atomic Level Understanding</h2>
            <p>See what happens to electrons when objects are rubbed together!</p>
            
            <div style="display: flex; gap: 20px; margin: 20px 0;">
                <div style="flex: 1;">
                    <h3>Glass Rod</h3>
                    <div class="particle-container" id="glassAtoms">
                        <!-- Particles will be added by JavaScript -->
                    </div>
                    <p style="text-align: center;">Status: <span id="glassStatus">Neutral</span></p>
                </div>
                
                <div style="flex: 1;">
                    <h3>Silk Cloth</h3>
                    <div class="particle-container" id="silkAtoms">
                        <!-- Particles will be added by JavaScript -->
                    </div>
                    <p style="text-align: center;">Status: <span id="silkStatus">Neutral</span></p>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button class="btn" onclick="simulateRubbing()">🔄 Rub Glass with Silk</button>
                <button class="btn" onclick="resetAtoms()">↺ Reset to Neutral</button>
            </div>
            
            <div class="concept-card">
                <h3>What's happening:</h3>
                <p>When glass is rubbed with silk, some electrons move from the glass to the silk. Glass becomes positive (fewer electrons) and silk becomes negative (more electrons). The total charge remains constant!</p>
            </div>
        </div>

        <!-- Quiz Tab -->
        <div id="quiz" class="tab-content">
            <h2>🎯 Test Your Knowledge</h2>
            <p>Let's see how well you understand electric charge!</p>
            
            <div id="quizContainer">
                <!-- Quiz questions will be loaded here -->
            </div>
            
            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="startQuiz()" id="startQuizBtn">Start Quiz</button>
                <button class="btn" onclick="nextQuestion()" id="nextBtn" style="display: none;">Next Question</button>
            </div>
            
            <div id="quizResults" style="display: none;">
                <div class="concept-card">
                    <h3>Quiz Complete! 🎉</h3>
                    <p>Your Score: <span id="finalScore"></span></p>
                    <p id="scoreMessage"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentTab = 'theory';
        let currentQuiz = 0;
        let quizScore = 0;
        let completedSections = new Set();
        
        // Quiz questions
        const quizQuestions = [
            {
                question: "Who is credited with the discovery of electric charge?",
                options: ["Benjamin Franklin", "Thales of Miletus", "Isaac Newton", "Albert Einstein"],
                correct: 1,
                explanation: "Thales of Miletus discovered around 600 BC that amber attracts light objects when rubbed."
            },
            {
                question: "What happens when two positively charged objects are brought close together?",
                options: ["They attract", "They repel", "Nothing happens", "They become neutral"],
                correct: 1,
                explanation: "Like charges repel each other - this is a fundamental law of electrostatics."
            },
            {
                question: "When a glass rod is rubbed with silk, what type of charge does the glass rod acquire?",
                options: ["Negative", "Positive", "Neutral", "Both positive and negative"],
                correct: 1,
                explanation: "The glass rod becomes positive as it loses electrons to the silk cloth."
            },
            {
                question: "What happens to the total charge when two objects are rubbed together?",
                options: ["It increases", "It decreases", "It remains constant", "It becomes zero"],
                correct: 2,
                explanation: "Charge is conserved - electrons are transferred but the total charge remains constant."
            },
            {
                question: "In a gold-leaf electroscope, why do the leaves diverge when charged?",
                options: ["They attract each other", "They repel each other", "They become magnetic", "They lose mass"],
                correct: 1,
                explanation: "Both leaves get the same type of charge and repel each other, causing divergence."
            }
        ];

        // Tab switching function
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            currentTab = tabName;
            completedSections.add(tabName);
            updateProgress();
        }

        // Progress tracking
        function updateProgress() {
            const totalSections = 5;
            const progress = (completedSections.size / totalSections) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Enhanced Experiment functions
        let currentExperiment = 'basic';
        let draggedObject = null;
        let isDragging = false;
        let forceCanvas, forceCtx;
        
        function switchExperiment(experiment) {
            // Hide all experiments
            document.querySelectorAll('.experiment-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.experiment-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected experiment
            document.getElementById(experiment + 'Experiment').classList.add('active');
            event.target.classList.add('active');
            
            currentExperiment = experiment;
            
            // Initialize specific experiment
            switch(experiment) {
                case 'basic':
                    initializeBasicExperiment();
                    break;
                case 'electroscope':
                    initializeElectroscopeExperiment();
                    break;
                case 'neutralization':
                    initializeNeutralizationExperiment();
                    break;
                case 'induction':
                    initializeInductionExperiment();
                    break;
            }
            
            addObservation(`🔄 Switched to ${experiment} experiment`);
        }

        function initializeBasicExperiment() {
            forceCanvas = document.getElementById('forceCanvas');
            forceCtx = forceCanvas.getContext('2d');
            
            // Set canvas size to match container
            const lab = document.getElementById('physicsLab');
            forceCanvas.width = lab.offsetWidth;
            forceCanvas.height = lab.offsetHeight;
            
            // Position objects randomly
            const objects = document.querySelectorAll('.lab-object');
            objects.forEach((obj, index) => {
                obj.style.left = (100 + index * 120) + 'px';
                obj.style.top = (50 + (index % 2) * 200) + 'px';
                
                // Add drag functionality
                obj.addEventListener('mousedown', startDrag);
                obj.addEventListener('touchstart', startDrag);
            });
            
            document.addEventListener('mousemove', dragObject);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchmove', dragObject);
            document.addEventListener('touchend', endDrag);
            
            // Start animation loop
            animateForces();
        }

        function startDrag(e) {
            e.preventDefault();
            draggedObject = e.target.closest('.lab-object');
            isDragging = true;
            draggedObject.style.zIndex = '100';
            draggedObject.classList.add('pulse');
            
            addObservation(`🎯 Picked up ${draggedObject.querySelector('.object-label').textContent}`);
        }

        function dragObject(e) {
            if (!isDragging || !draggedObject) return;
            
            e.preventDefault();
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            
            const lab = document.getElementById('physicsLab');
            const rect = lab.getBoundingClientRect();
            
            const x = clientX - rect.left - 40; // Center the object
            const y = clientY - rect.top - 40;
            
            // Keep within bounds
            const maxX = lab.offsetWidth - 80;
            const maxY = lab.offsetHeight - 80;
            
            draggedObject.style.left = Math.max(0, Math.min(maxX, x)) + 'px';
            draggedObject.style.top = Math.max(0, Math.min(maxY, y)) + 'px';
        }

        function endDrag() {
            if (draggedObject) {
                draggedObject.style.zIndex = '10';
                draggedObject.classList.remove('pulse');
                draggedObject = null;
            }
            isDragging = false;
        }

        function animateForces() {
            if (currentExperiment !== 'basic') return;
            
            forceCtx.clearRect(0, 0, forceCanvas.width, forceCanvas.height);
            
            const objects = document.querySelectorAll('.lab-object');
            let maxForce = 0;
            let minDistance = Infinity;
            let interactingPair = null;
            
            // Draw force lines between objects
            for (let i = 0; i < objects.length; i++) {
                for (let j = i + 1; j < objects.length; j++) {
                    const obj1 = objects[i];
                    const obj2 = objects[j];
                    
                    const pos1 = getObjectCenter(obj1);
                    const pos2 = getObjectCenter(obj2);
                    const distance = Math.sqrt(Math.pow(pos2.x - pos1.x, 2) + Math.pow(pos2.y - pos1.y, 2));
                    
                    if (distance < 200) { // Only show forces for nearby objects
                        const charge1 = obj1.dataset.charge;
                        const charge2 = obj2.dataset.charge;
                        const strength1 = parseInt(obj1.dataset.strength);
                        const strength2 = parseInt(obj2.dataset.strength);
                        
                        // Calculate force strength (inverse square law simulation)
                        const force = (strength1 * strength2) / Math.max(distance * distance / 10000, 1);
                        
                        if (distance < minDistance) {
                            minDistance = distance;
                            maxForce = force;
                            interactingPair = {obj1, obj2, charge1, charge2, distance, force};
                        }
                        
                        // Draw force line
                        drawForceLine(pos1, pos2, charge1, charge2, force, distance);
                    }
                }
            }
            
            // Update meters
            updateMeters(interactingPair);
            
            requestAnimationFrame(animateForces);
        }

        function getObjectCenter(obj) {
            return {
                x: parseInt(obj.style.left) + 40,
                y: parseInt(obj.style.top) + 40
            };
        }

        function drawForceLine(pos1, pos2, charge1, charge2, force, distance) {
            const isAttraction = charge1 !== charge2 && charge1 !== 'neutral' && charge2 !== 'neutral';
            const isRepulsion = charge1 === charge2 && charge1 !== 'neutral';
            
            if (!isAttraction && !isRepulsion) return;
            
            forceCtx.save();
            
            // Line style based on force type
            if (isAttraction) {
                forceCtx.strokeStyle = '#48bb78';
                forceCtx.setLineDash([]);
            } else {
                forceCtx.strokeStyle = '#e53e3e';
                forceCtx.setLineDash([5, 5]);
            }
            
            forceCtx.lineWidth = Math.max(1, Math.min(5, force / 2));
            forceCtx.globalAlpha = Math.max(0.3, Math.min(1, force / 10));
            
            // Draw line
            forceCtx.beginPath();
            forceCtx.moveTo(pos1.x, pos1.y);
            forceCtx.lineTo(pos2.x, pos2.y);
            forceCtx.stroke();
            
            // Draw arrows
            drawArrow(pos1, pos2, isAttraction);
            
            forceCtx.restore();
        }

        function drawArrow(start, end, isAttraction) {
            const angle = Math.atan2(end.y - start.y, end.x - start.x);
            const arrowLength = 15;
            const arrowAngle = Math.PI / 6;
            
            // Arrow position (closer to objects for repulsion, away for attraction)
            let arrowX, arrowY;
            if (isAttraction) {
                arrowX = start.x + (end.x - start.x) * 0.7;
                arrowY = start.y + (end.y - start.y) * 0.7;
            } else {
                arrowX = start.x + (end.x - start.x) * 0.3;
                arrowY = start.y + (end.y - start.y) * 0.3;
            }
            
            forceCtx.beginPath();
            forceCtx.moveTo(arrowX, arrowY);
            forceCtx.lineTo(
                arrowX - arrowLength * Math.cos(angle - arrowAngle),
                arrowY - arrowLength * Math.sin(angle - arrowAngle)
            );
            forceCtx.moveTo(arrowX, arrowY);
            forceCtx.lineTo(
                arrowX - arrowLength * Math.cos(angle + arrowAngle),
                arrowY - arrowLength * Math.sin(angle + arrowAngle)
            );
            forceCtx.stroke();
        }

        function updateMeters(interactingPair) {
            const distanceElement = document.getElementById('distanceValue');
            const forceElement = document.getElementById('forceValue');
            const forceFill = document.getElementById('forceFill');
            
            if (interactingPair) {
                const distance = (interactingPair.distance / 10).toFixed(1); // Convert to cm
                const force = interactingPair.force.toFixed(1);
                const forcePercent = Math.min(100, (interactingPair.force / 20) * 100);
                
                distanceElement.textContent = distance + ' cm';
                forceElement.textContent = force + ' units';
                forceFill.style.width = forcePercent + '%';
                
                // Add observations for significant interactions
                if (interactingPair.distance < 100 && Math.random() < 0.01) { // Occasional observations
                    const obj1Name = interactingPair.obj1.querySelector('.object-label').textContent;
                    const obj2Name = interactingPair.obj2.querySelector('.object-label').textContent;
                    const forceType = interactingPair.charge1 === interactingPair.charge2 ? 'REPEL' : 'ATTRACT';
                    addObservation(`⚡ ${obj1Name} and ${obj2Name} ${forceType} with force ${force}`, 
                                 forceType === 'REPEL' ? 'important' : 'success');
                }
            } else {
                distanceElement.textContent = '-- cm';
                forceElement.textContent = '0';
                forceFill.style.width = '0%';
            }
        }

        function resetExperiment() {
            if (currentExperiment === 'basic') {
                initializeBasicExperiment();
                addObservation('🔄 Experiment reset');
            }
        }

        function autoDemo() {
            if (currentExperiment !== 'basic') return;
            
            const objects = document.querySelectorAll('.lab-object');
            let step = 0;
            
            const demoSteps = [
                () => {
                    // Move positive objects together
                    const glass = objects[0];
                    const fur = objects[2];
                    glass.style.left = '200px';
                    glass.style.top = '150px';
                    fur.style.left = '300px';
                    fur.style.top = '150px';
                    addObservation('🎬 Demo: Moving like charges together...', 'important');
                },
                () => {
                    // Move opposite charges together
                    const glass = objects[0];
                    const plastic = objects[1];
                    glass.style.left = '200px';
                    glass.style.top = '150px';
                    plastic.style.left = '300px';
                    plastic.style.top = '150px';
                    addObservation('🎬 Demo: Moving opposite charges together...', 'success');
                },
                () => {
                    // Test with neutral object
                    const glass = objects[0];
                    const paper = objects[4];
                    glass.style.left = '200px';
                    glass.style.top = '150px';
                    paper.style.left = '280px';
                    paper.style.top = '150px';
                    addObservation('🎬 Demo: Testing with neutral object...');
                }
            ];
            
            function runStep() {
                if (step < demoSteps.length) {
                    demoSteps[step]();
                    step++;
                    setTimeout(runStep, 3000);
                } else {
                    resetExperiment();
                    addObservation('🎬 Demo complete!');
                }
            }
            
            runStep();
        }

        // Electroscope Experiment
        function initializeElectroscopeExperiment() {
            const testObjects = document.querySelectorAll('.test-object');
            testObjects.forEach(obj => {
                obj.addEventListener('dragstart', handleDragStart);
                obj.addEventListener('dragend', handleDragEnd);
            });
            
            const electroscope = document.querySelector('.digital-electroscope');
            electroscope.addEventListener('dragover', handleDragOver);
            electroscope.addEventListener('drop', handleDrop);
            
            addObservation('🔬 Electroscope ready for testing');
        }

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.charge);
            addObservation(`📏 Testing with ${e.target.textContent.trim()}`);
        }

        function handleDragEnd(e) {
            // Reset electroscope after drag ends
            setTimeout(() => {
                resetElectroscope();
            }, 2000);
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            const charge = e.dataTransfer.getData('text/plain');
            activateElectroscope(charge);
        }

        function activateElectroscope(chargeType) {
            const leftLeaf = document.querySelector('.left-leaf');
            const rightLeaf = document.querySelector('.right-leaf');
            const chargeDisplay = document.getElementById('chargeDisplay');
            const leafAngle = document.getElementById('leafAngle');
            const chargeLevel = document.getElementById('chargeLevel');
            
            if (chargeType === 'positive') {
                leftLeaf.style.transform = 'rotate(-30deg)';
                rightLeaf.style.transform = 'rotate(30deg)';
                chargeDisplay.textContent = '+5.2';
                leafAngle.textContent = '30°';
                chargeLevel.textContent = 'Positive';
                chargeLevel.style.color = '#e53e3e';
                addObservation('⚡ Positive charge detected! Leaves diverge strongly', 'important');
            } else if (chargeType === 'negative') {
                leftLeaf.style.transform = 'rotate(-25deg)';
                rightLeaf.style.transform = 'rotate(25deg)';
                chargeDisplay.textContent = '-4.8';
                leafAngle.textContent = '25°';
                chargeLevel.textContent = 'Negative';
                chargeLevel.style.color = '#3182ce';
                addObservation('⚡ Negative charge detected! Leaves diverge moderately', 'success');
            } else {
                leftLeaf.style.transform = 'rotate(0deg)';
                rightLeaf.style.transform = 'rotate(0deg)';
                chargeDisplay.textContent = '0.0';
                leafAngle.textContent = '0°';
                chargeLevel.textContent = 'Neutral';
                chargeLevel.style.color = '#4a5568';
                addObservation('📏 No charge detected - object is neutral');
            }
        }

        function resetElectroscope() {
            const leftLeaf = document.querySelector('.left-leaf');
            const rightLeaf = document.querySelector('.right-leaf');
            const chargeDisplay = document.getElementById('chargeDisplay');
            const leafAngle = document.getElementById('leafAngle');
            const chargeLevel = document.getElementById('chargeLevel');
            
            leftLeaf.style.transform = 'rotate(0deg)';
            rightLeaf.style.transform = 'rotate(0deg)';
            chargeDisplay.textContent = '0.0';
            leafAngle.textContent = '0°';
            chargeLevel.textContent = 'None';
            chargeLevel.style.color = '#4a5568';
        }

        // Neutralization Experiment
        function initializeNeutralizationExperiment() {
            createChargeParticles();
            addObservation('⚖️ Neutralization experiment ready');
        }

        function createChargeParticles() {
            const positiveContainer = document.getElementById('positiveCharges');
            const negativeContainer = document.getElementById('negativeCharges');
            
            positiveContainer.innerHTML = '';
            negativeContainer.innerHTML = '';
            
            const positiveCount = parseInt(document.getElementById('positiveCount').textContent);
            const negativeCount = parseInt(document.getElementById('negativeCount').textContent);
            
            for (let i = 0; i < positiveCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'charge-particle positive-particle';
                positiveContainer.appendChild(particle);
            }
            
            for (let i = 0; i < negativeCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'charge-particle negative-particle';
                negativeContainer.appendChild(particle);
            }
        }

        function adjustCharges(type, delta) {
            const countElement = document.getElementById(type + 'Count');
            let count = parseInt(countElement.textContent);
            count = Math.max(0, Math.min(20, count + delta));
            countElement.textContent = count;
            createChargeParticles();
            
            addObservation(`🔄 Adjusted ${type} charges to ${count}`);
        }

        function startNeutralization() {
            const positiveCount = parseInt(document.getElementById('positiveCount').textContent);
            const negativeCount = parseInt(document.getElementById('negativeCount').textContent);
            const resultDisplay = document.getElementById('neutralizationResult');
            
            const neutralized = Math.min(positiveCount, negativeCount);
            const remaining = Math.abs(positiveCount - negativeCount);
            const remainingType = positiveCount > negativeCount ? 'positive' : 'negative';
            
            // Animate neutralization
            animateNeutralization(neutralized, remaining, remainingType, resultDisplay);
        }

        function animateNeutralization(neutralized, remaining, remainingType, resultDisplay) {
            const particles = document.querySelectorAll('.charge-particle');
            
            // First, make particles move toward center
            particles.forEach((particle, index) => {
                if (index < neutralized * 2) {
                    particle.style.transform = 'translateX(0px) translateY(0px) scale(0)';
                    particle.style.opacity = '0';
                }
            });
            
            setTimeout(() => {
                if (remaining === 0) {
                    resultDisplay.style.background = '#d4edda';
                    resultDisplay.style.color = '#155724';
                    resultDisplay.textContent = `✅ Perfect Neutralization! All ${neutralized} pairs cancelled out.`;
                    addObservation(`⚖️ Perfect neutralization achieved! ${neutralized} pairs cancelled`, 'success');
                } else {
                    resultDisplay.style.background = '#fff3cd';
                    resultDisplay.style.color = '#856404';
                    resultDisplay.textContent = `⚡ ${remaining} ${remainingType} charges remain after ${neutralized} pairs neutralized.`;
                    addObservation(`⚖️ Partial neutralization: ${remaining} ${remainingType} charges remain`, 'important');
                }
            }, 1000);
        }

        function resetNeutralization() {
            document.getElementById('positiveCount').textContent = '10';
            document.getElementById('negativeCount').textContent = '8';
            document.getElementById('neutralizationResult').textContent = '';
            document.getElementById('neutralizationResult').style.background = '';
            createChargeParticles();
            addObservation('🔄 Neutralization experiment reset');
        }

        // Enhanced Induction Experiment
        let currentRodType = 'positive';
        let currentDistance = 200;
        let fieldLinesVisible = true;
        let animationStep = 0;
        let stepByStepMode = false;

        function initializeInductionExperiment() {
            createRodCharges();
            createConductorCharges();
            updateInductionStep(1);
            drawFieldLines();
            addObservation('🌊 Enhanced induction experiment ready!');
        }

        function selectRod(type) {
            currentRodType = type;
            
            // Update button states
            document.querySelectorAll('.rod-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(type === 'positive' ? 'posRodBtn' : 'negRodBtn').classList.add('active');
            
            // Update rod appearance
            const rodBody = document.getElementById('rodBody');
            const rodLabel = rodBody.querySelector('.rod-label');
            
            if (type === 'positive') {
                rodBody.className = 'rod-body';
                rodLabel.textContent = 'Positive Rod';
                document.getElementById('negRodBtn').classList.remove('negative');
            } else {
                rodBody.className = 'rod-body negative';
                rodLabel.textContent = 'Negative Rod';
                document.getElementById('negRodBtn').classList.add('negative');
            }
            
            createRodCharges();
            updateInductionDistance(currentDistance);
            drawFieldLines();
            
            addObservation(`🔄 Switched to ${type} rod`);
        }

        function createRodCharges() {
            const rodCharges = document.getElementById('rodCharges');
            rodCharges.innerHTML = '';
            
            for (let i = 0; i < 6; i++) {
                const charge = document.createElement('div');
                charge.className = `rod-charge ${currentRodType}`;
                charge.textContent = currentRodType === 'positive' ? '+' : '-';
                rodCharges.appendChild(charge);
            }
        }

        function createConductorCharges() {
            // Create initial neutral state for conductor
            const leftCharges = document.getElementById('leftCharges1');
            const rightCharges = document.getElementById('rightCharges1');
            
            leftCharges.innerHTML = '';
            rightCharges.innerHTML = '';
            
            // Add equal positive and negative charges
            for (let i = 0; i < 4; i++) {
                const posCharge = document.createElement('div');
                posCharge.className = 'conductor-charge positive';
                const negCharge = document.createElement('div');
                negCharge.className = 'conductor-charge negative';
                
                leftCharges.appendChild(posCharge);
                rightCharges.appendChild(negCharge);
            }
        }

        function updateInductionDistance(distance) {
            currentDistance = distance;
            document.getElementById('distanceDisplay').textContent = Math.round(distance / 10) + ' cm';
            
            // Move rod based on distance
            const rod = document.getElementById('demoRod');
            const maxLeft = 300;
            const newLeft = Math.max(50, maxLeft - (200 - distance));
            rod.style.left = newLeft + 'px';
            
            // Calculate induction effects
            const inductionStrength = Math.max(0, (200 - distance) / 200);
            updateInductionEffects(inductionStrength);
            updateGuideSteps(inductionStrength);
            
            // Update force meter
            const forceMeter = document.getElementById('inductionForceMeter');
            const forceValue = document.getElementById('inductionForceValue');
            const forcePercent = Math.round(inductionStrength * 100);
            
            forceMeter.style.width = forcePercent + '%';
            forceValue.textContent = forcePercent + '%';
            
            drawFieldLines();
        }

        function updateInductionEffects(strength) {
            // Update conductor (metal object)
            const object1 = document.getElementById('demoObject1');
            const leftCharges = document.getElementById('leftCharges1');
            const rightCharges = document.getElementById('rightCharges1');
            const status1 = document.getElementById('status1');
            
            if (strength > 0.3) {
                object1.classList.add('polarized', 'attracted');
                
                // Redistribute charges in conductor
                leftCharges.innerHTML = '';
                rightCharges.innerHTML = '';
                
                const attractedSide = currentRodType === 'positive' ? 'negative' : 'positive';
                const repelledSide = currentRodType === 'positive' ? 'positive' : 'negative';
                
                // Attracted charges go to the left (closer to rod)
                for (let i = 0; i < 6; i++) {
                    const charge = document.createElement('div');
                    charge.className = `conductor-charge ${attractedSide}`;
                    leftCharges.appendChild(charge);
                }
                
                // Repelled charges go to the right
                for (let i = 0; i < 6; i++) {
                    const charge = document.createElement('div');
                    charge.className = `conductor-charge ${repelledSide}`;
                    rightCharges.appendChild(charge);
                }
                
                status1.textContent = `Polarized! (${attractedSide} charges closer)`;
                status1.style.color = '#e53e3e';
            } else {
                object1.classList.remove('polarized', 'attracted');
                createConductorCharges();
                status1.textContent = 'Neutral (balanced)';
                status1.style.color = '#718096';
            }
            
            // Update insulator (plastic object)
            const object2 = document.getElementById('demoObject2');
            const molecules = object2.querySelectorAll('.molecule');
            const status2 = document.getElementById('status2');
            
            if (strength > 0.4) {
                object2.classList.add('oriented', 'attracted');
                molecules.forEach(mol => {
                    mol.style.transform = currentRodType === 'positive' ? 'rotate(-15deg)' : 'rotate(15deg)';
                });
                status2.textContent = 'Molecules aligned with field';
                status2.style.color = '#e53e3e';
            } else {
                object2.classList.remove('oriented', 'attracted');
                molecules.forEach(mol => {
                    mol.style.transform = 'rotate(0deg)';
                });
                status2.textContent = 'Neutral (molecules random)';
                status2.style.color = '#718096';
            }
            
            // Update paper bits
            const object3 = document.getElementById('demoObject3');
            const paperBits = object3.querySelectorAll('.paper-bit');
            const status3 = document.getElementById('status3');
            
            if (strength > 0.5) {
                object3.classList.add('attracted');
                paperBits.forEach((bit, index) => {
                    const leftSide = bit.querySelector('.left-side');
                    const rightSide = bit.querySelector('.right-side');
                    
                    if (currentRodType === 'positive') {
                        leftSide.textContent = '-';
                        leftSide.style.background = '#3498db';
                        rightSide.textContent = '+';
                        rightSide.style.background = '#e74c3c';
                    } else {
                        leftSide.textContent = '+';
                        leftSide.style.background = '#e74c3c';
                        rightSide.textContent = '-';
                        rightSide.style.background = '#3498db';
                    }
                    
                    bit.style.transform = `translateX(-${strength * 8}px) rotate(${strength * 10}deg)`;
                });
                status3.textContent = 'Being attracted!';
                status3.style.color = '#e53e3e';
            } else {
                object3.classList.remove('attracted');
                paperBits.forEach(bit => {
                    const leftSide = bit.querySelector('.left-side');
                    const rightSide = bit.querySelector('.right-side');
                    
                    leftSide.textContent = '⚫';
                    leftSide.style.background = '#95a5a6';
                    rightSide.textContent = '⚫';
                    rightSide.style.background = '#95a5a6';
                    
                    bit.style.transform = 'translateX(0px) rotate(0deg)';
                });
                status3.textContent = 'Ready to be attracted';
                status3.style.color = '#718096';
            }
        }

        function updateGuideSteps(strength) {
            document.querySelectorAll('.guide-step').forEach(step => step.classList.remove('active'));
            
            if (strength < 0.1) {
                updateInductionStep(1);
            } else if (strength < 0.4) {
                updateInductionStep(2);
            } else if (strength < 0.7) {
                updateInductionStep(3);
            } else {
                updateInductionStep(4);
            }
        }

        function updateInductionStep(step) {
            document.querySelectorAll('.guide-step').forEach(s => s.classList.remove('active'));
            document.getElementById(`step${step}`).classList.add('active');
            
            const explanations = {
                1: {
                    text: "Rod is far away. Objects are neutral with equal positive and negative charges distributed evenly.",
                    field: "Not reaching objects",
                    distribution: "Uniform in all objects", 
                    force: "No attraction or repulsion"
                },
                2: {
                    text: "Rod's electric field begins to reach the objects. Charges start to feel the influence.",
                    field: "Extending toward objects",
                    distribution: "Beginning to redistribute",
                    force: "Weak attractive force developing"
                },
                3: {
                    text: "Strong field causes charge separation! In conductors, free electrons move. In insulators, molecules orient.",
                    field: "Strong field penetrating objects",
                    distribution: "Clear separation occurring",
                    force: "Significant attractive force"
                },
                4: {
                    text: "Maximum induction! Objects are strongly polarized. Unlike charges are closer to the rod, creating strong attraction.",
                    field: "Maximum field strength",
                    distribution: "Complete charge separation",
                    force: "Strong attraction (unlike charges closer)"
                }
            };
            
            const explanation = explanations[step];
            const content = document.getElementById('inductionExplanationNew');
            content.querySelector('p').textContent = explanation.text;
            
            const keyPoints = content.querySelectorAll('.key-point span:last-child');
            keyPoints[0].innerHTML = `<strong>Electric Field:</strong> ${explanation.field}`;
            keyPoints[1].innerHTML = `<strong>Charge Distribution:</strong> ${explanation.distribution}`;
            keyPoints[2].innerHTML = `<strong>Force:</strong> ${explanation.force}`;
        }

        function drawFieldLines() {
            if (!fieldLinesVisible) return;
            
            const svg = document.getElementById('fieldLines');
            svg.innerHTML = '';
            
            const rodX = 50 + (300 - currentDistance);
            const rodY = 200;
            
            // Draw field lines emanating from rod
            for (let i = 0; i < 8; i++) {
                const angle = (i * Math.PI * 2) / 8;
                const startX = rodX + 60 + Math.cos(angle) * 20;
                const startY = rodY + Math.sin(angle) * 15;
                const endX = startX + Math.cos(angle) * 150;
                const endY = startY + Math.sin(angle) * 100;
                
                const line = document.createElementNS("http://www.w3.org/2000/svg", "path");
                line.setAttribute("d", `M ${startX} ${startY} Q ${(startX + endX) / 2} ${(startY + endY) / 2} ${endX} ${endY}`);
                line.setAttribute("class", "field-line");
                line.style.animationDelay = (i * 0.2) + 's';
                svg.appendChild(line);
            }
        }

        function playInductionAnimation() {
            addObservation('🎬 Starting induction animation...');
            
            const steps = [
                () => {
                    document.getElementById('distanceSlider').value = 200;
                    updateInductionDistance(200);
                    addObservation('Step 1: Rod far away - no effect');
                },
                () => {
                    document.getElementById('distanceSlider').value = 150;
                    updateInductionDistance(150);
                    addObservation('Step 2: Field reaches objects');
                },
                () => {
                    document.getElementById('distanceSlider').value = 100;
                    updateInductionDistance(100);
                    addObservation('Step 3: Charges begin separating');
                },
                () => {
                    document.getElementById('distanceSlider').value = 50;
                    updateInductionDistance(50);
                    addObservation('Step 4: Maximum induction effect!', 'success');
                },
                () => {
                    document.getElementById('distanceSlider').value = 200;
                    updateInductionDistance(200);
                    addObservation('🔄 Animation complete - objects return to neutral');
                }
            ];
            
            let stepIndex = 0;
            function runStep() {
                if (stepIndex < steps.length) {
                    steps[stepIndex]();
                    stepIndex++;
                    setTimeout(runStep, 2000);
                }
            }
            
            runStep();
        }

        function stepByStep() {
            stepByStepMode = !stepByStepMode;
            
            if (stepByStepMode) {
                animationStep = 0;
                addObservation('📚 Step-by-step mode activated');
                document.querySelector('[onclick="stepByStep()"]').textContent = '➡️ Next Step';
                nextStep();
            } else {
                addObservation('📚 Step-by-step mode deactivated');
                document.querySelector('[onclick="stepByStep()"]').textContent = '📚 Step-by-Step Guide';
            }
        }

        function nextStep() {
            if (!stepByStepMode) return;
            
            const distances = [200, 150, 100, 50];
            const explanations = [
                'Objects are neutral - equal + and - charges',
                'Electric field starts affecting objects',
                'Charge separation becomes visible',
                'Maximum induction - strong attraction!'
            ];
            
            if (animationStep < distances.length) {
                document.getElementById('distanceSlider').value = distances[animationStep];
                updateInductionDistance(distances[animationStep]);
                addObservation(`📚 Step ${animationStep + 1}: ${explanations[animationStep]}`);
                animationStep++;
                
                if (animationStep >= distances.length) {
                    stepByStepMode = false;
                    document.querySelector('[onclick="stepByStep()"]').textContent = '📚 Step-by-Step Guide';
                    addObservation('📚 Step-by-step complete!', 'success');
                }
            }
        }

        function resetInductionDemo() {
            currentDistance = 200;
            document.getElementById('distanceSlider').value = 200;
            updateInductionDistance(200);
            stepByStepMode = false;
            animationStep = 0;
            document.querySelector('[onclick="stepByStep()"]').textContent = '📚 Step-by-Step Guide';
            addObservation('🔄 Induction demo reset');
        }

        function toggleField() {
            fieldLinesVisible = !fieldLinesVisible;
            const btn = document.querySelector('[onclick="toggleField()"]');
            
            if (fieldLinesVisible) {
                drawFieldLines();
                btn.textContent = '👀 Hide Field Lines';
                addObservation('👀 Electric field lines now visible');
            } else {
                document.getElementById('fieldLines').innerHTML = '';
                btn.textContent = '👀 Show Field Lines';
                addObservation('👀 Electric field lines hidden');
            }
        }

        // Observation system
        function addObservation(text, type = '') {
            const feed = document.getElementById('observationFeed');
            const item = document.createElement('div');
            item.className = `observation-item ${type}`;
            item.textContent = `${new Date().toLocaleTimeString()}: ${text}`;
            
            feed.insertBefore(item, feed.firstChild);
            
            // Keep only last 10 observations
            while (feed.children.length > 10) {
                feed.removeChild(feed.lastChild);
            }
            
            // Auto-scroll to top
            feed.scrollTop = 0;
        }

        function clearObservations() {
            document.getElementById('observationFeed').innerHTML = 
                '<div class="observation-item">🎯 Observations cleared - ready for new experiments!</div>';
        }

        // Electroscope functions
        function chargeElectroscope(chargeType) {
            const leftLeaf = document.getElementById('leftLeaf');
            const rightLeaf = document.getElementById('rightLeaf');
            const knob = document.getElementById('electroscopeKnob');
            
            if (chargeType === 'positive') {
                leftLeaf.style.transform = 'rotate(-30deg)';
                rightLeaf.style.transform = 'rotate(30deg)';
                knob.style.background = '#e74c3c';
                knob.classList.add('glow');
            } else {
                leftLeaf.style.transform = 'rotate(-25deg)';
                rightLeaf.style.transform = 'rotate(25deg)';
                knob.style.background = '#3498db';
                knob.classList.add('glow');
            }
            
            setTimeout(() => knob.classList.remove('glow'), 1000);
        }

        function dischargeElectroscope() {
            const leftLeaf = document.getElementById('leftLeaf');
            const rightLeaf = document.getElementById('rightLeaf');
            const knob = document.getElementById('electroscopeKnob');
            
            leftLeaf.style.transform = 'rotate(0deg)';
            rightLeaf.style.transform = 'rotate(0deg)';
            knob.style.background = '#f39c12';
            knob.classList.remove('glow');
        }

        // Atomic simulation functions
        function initializeAtoms() {
            createAtoms('glassAtoms', 'glass');
            createAtoms('silkAtoms', 'silk');
        }

        function createAtoms(containerId, material) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            // Create protons (stationary)
            for (let i = 0; i < 15; i++) {
                const proton = document.createElement('div');
                proton.className = 'particle proton';
                proton.style.left = Math.random() * 180 + 'px';
                proton.style.top = Math.random() * 180 + 'px';
                container.appendChild(proton);
            }
            
            // Create electrons (mobile)
            for (let i = 0; i < 15; i++) {
                const electron = document.createElement('div');
                electron.className = 'particle electron';
                electron.style.left = Math.random() * 180 + 'px';
                electron.style.top = Math.random() * 180 + 'px';
                container.appendChild(electron);
            }
        }

        function simulateRubbing() {
            const glassContainer = document.getElementById('glassAtoms');
            const silkContainer = document.getElementById('silkAtoms');
            const glassElectrons = glassContainer.querySelectorAll('.electron');
            const silkElectrons = silkContainer.querySelectorAll('.electron');
            
            // Move some electrons from glass to silk
            for (let i = 0; i < 3; i++) {
                if (glassElectrons[i]) {
                    glassElectrons[i].style.opacity = '0.3';
                }
            }
            
            // Add electrons to silk
            for (let i = 12; i < 15; i++) {
                if (silkElectrons[i]) {
                    silkElectrons[i].style.background = '#2ecc71';
                    silkElectrons[i].style.transform = 'scale(1.2)';
                }
            }
            
            document.getElementById('glassStatus').textContent = 'Positive (+)';
            document.getElementById('glassStatus').style.color = '#e74c3c';
            document.getElementById('silkStatus').textContent = 'Negative (-)';
            document.getElementById('silkStatus').style.color = '#3498db';
        }

        function resetAtoms() {
            initializeAtoms();
            document.getElementById('glassStatus').textContent = 'Neutral';
            document.getElementById('glassStatus').style.color = '#333';
            document.getElementById('silkStatus').textContent = 'Neutral';
            document.getElementById('silkStatus').style.color = '#333';
        }

        // Quiz functions
        function startQuiz() {
            currentQuiz = 0;
            quizScore = 0;
            document.getElementById('startQuizBtn').style.display = 'none';
            document.getElementById('quizResults').style.display = 'none';
            loadQuestion();
        }

        function loadQuestion() {
            const container = document.getElementById('quizContainer');
            const question = quizQuestions[currentQuiz];
            
            container.innerHTML = `
                <div class="quiz-question">
                    <h3>Question ${currentQuiz + 1} of ${quizQuestions.length}</h3>
                    <p style="font-size: 1.1rem; margin: 15px 0;"><strong>${question.question}</strong></p>
                    <div id="options">
                        ${question.options.map((option, index) => 
                            `<div class="quiz-option" onclick="selectOption(${index})">${option}</div>`
                        ).join('')}
                    </div>
                    <div id="explanation" style="display: none; margin-top: 15px; padding: 15px; background: #e8f4fd; border-radius: 8px;">
                        <strong>Explanation:</strong> ${question.explanation}
                    </div>
                </div>
            `;
            
            document.getElementById('nextBtn').style.display = 'none';
        }

        function selectOption(selectedIndex) {
            const question = quizQuestions[currentQuiz];
            const options = document.querySelectorAll('.quiz-option');
            
            options.forEach((option, index) => {
                option.onclick = null; // Disable further clicks
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('incorrect');
                }
            });
            
            if (selectedIndex === question.correct) {
                quizScore++;
            }
            
            document.getElementById('explanation').style.display = 'block';
            document.getElementById('nextBtn').style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuiz++;
            if (currentQuiz < quizQuestions.length) {
                loadQuestion();
            } else {
                showQuizResults();
            }
        }

        function showQuizResults() {
            document.getElementById('quizContainer').innerHTML = '';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('quizResults').style.display = 'block';
            
            const percentage = Math.round((quizScore / quizQuestions.length) * 100);
            document.getElementById('finalScore').textContent = `${quizScore}/${quizQuestions.length} (${percentage}%)`;
            
            let message;
            if (percentage >= 80) {
                message = "Excellent! You have a great understanding of electric charge! ⚡🎉";
            } else if (percentage >= 60) {
                message = "Good job! Review the concepts and try again to improve your score. 📚";
            } else {
                message = "Keep studying! Go through the theory and experiments again. 💪";
            }
            
            document.getElementById('scoreMessage').textContent = message;
            document.getElementById('startQuizBtn').style.display = 'inline-block';
            document.getElementById('startQuizBtn').textContent = 'Restart Quiz';
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeBasicExperiment(); // Start with basic experiment
            initializeAtoms();
            updateProgress();
            
            // Add some initial animations
            setTimeout(() => {
                document.querySelector('.header h1').style.transform = 'scale(1.05)';
                setTimeout(() => {
                    document.querySelector('.header h1').style.transform = 'scale(1)';
                }, 200);
            }, 500);
        });
    </script>
</body>
</html>
