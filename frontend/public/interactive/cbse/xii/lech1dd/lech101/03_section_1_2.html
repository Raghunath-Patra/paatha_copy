<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concentration of Solutions - Interactive Learning Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tab-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 12px 20px;
            color: white;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-weight: 500;
        }

        .tab-btn:hover, .tab-btn.active {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
        }

        .tab-content.active {
            display: block;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .calculator-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .calculator-card h3 {
            color: #4a5568;
            margin-bottom: 15px;
            text-align: center;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #2d3748;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .calculate-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
        }

        .result {
            margin-top: 15px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .visual-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* Enhanced Visualizer Styles */
        .viz-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .beaker-section {
            text-align: center;
        }

        .beaker-3d {
            position: relative;
            width: 200px;
            height: 250px;
            margin: 20px auto;
        }

        .beaker-main {
            position: relative;
            width: 180px;
            height: 230px;
            border: 4px solid #2c3e50;
            border-radius: 0 0 85px 85px;
            margin: 0 auto;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(240,240,240,0.9) 100%);
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.1),
                0 10px 30px rgba(0,0,0,0.2);
        }

        .beaker-rim {
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 190px;
            height: 15px;
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .solution-3d {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            transition: height 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 0 0 81px 81px;
            overflow: hidden;
            height: 0%;
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            animation: float 3s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .bubbles {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .bubble {
            position: absolute;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            animation: rise 4s infinite linear;
        }

        @keyframes rise {
            0% {
                transform: translateY(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-200px) scale(1);
                opacity: 0;
            }
        }

        .measurement-marks {
            position: absolute;
            right: -40px;
            top: 0;
            height: 100%;
        }

        .mark {
            position: absolute;
            right: 0;
            font-size: 12px;
            color: #666;
            font-weight: bold;
        }

        .mark::before {
            content: '';
            position: absolute;
            right: 25px;
            top: 50%;
            width: 20px;
            height: 2px;
            background: #666;
            transform: translateY(-50%);
        }

        .concentration-display {
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .concentration-type {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 5px;
        }

        .control-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
        }

        .modern-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e2e8f0;
            outline: none;
            margin: 10px 0;
            transition: background 0.3s ease;
            -webkit-appearance: none;
        }

        .modern-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .modern-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .property-display {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }

        .molecular-view {
            margin: 30px 0;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .molecular-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #molecular-canvas {
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .molecular-legend {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-dot.solvent {
            background: #3498db;
        }

        .legend-dot.solute {
            background: #e74c3c;
        }

        .comparison-chart {
            margin: 30px 0;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .chart-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        #comparison-chart {
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .chart-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .add-btn, .clear-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .add-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .clear-btn {
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
            color: white;
        }

        .add-btn:hover, .clear-btn:hover {
            transform: translateY(-2px);
        }

        .examples-grid {
            margin: 30px 0;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .example-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .example-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .example-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .example-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .example-card h4 {
            color: #2d3748;
            margin-bottom: 8px;
        }

        .example-card p {
            color: #666;
            font-weight: 500;
        }

        .formula-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #ff6b6b;
        }

        .formula {
            font-size: 1.2em;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
        }

        .quiz-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .question {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
        }

        .options {
            display: grid;
            gap: 10px;
            margin: 15px 0;
        }

        .option {
            padding: 10px;
            background: #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .option:hover {
            background: #dee2e6;
        }

        .option.selected {
            background: #667eea;
            color: white;
        }

        .option.correct {
            background: #28a745;
            color: white;
        }

        .option.incorrect {
            background: #dc3545;
            color: white;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .comparison-table th, .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
                align-items: center;
            }

            .viz-grid {
                grid-template-columns: 1fr;
            }
            
            .molecular-legend {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧪 Concentration of Solutions</h1>
            <p>Interactive Learning Tool for Class 12 Chemistry</p>
        </div>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('overview')">📚 Overview</button>
            <button class="tab-btn" onclick="showTab('calculators')">🔢 Calculators</button>
            <button class="tab-btn" onclick="showTab('visualizer')">📊 Visualizer</button>
            <button class="tab-btn" onclick="showTab('practice')">🎯 Practice</button>
            <button class="tab-btn" onclick="showTab('comparison')">📋 Comparison</button>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <h2>Understanding Concentration</h2>
            <p>Concentration describes how much solute is dissolved in a solution. We can express it in various ways:</p>
            
            <div class="formula-card">
                <h3>Mass Percentage (w/w)</h3>
                <div class="formula">Mass % = (Mass of component / Total mass of solution) × 100</div>
                <p>Used in industrial applications. Example: 10% glucose means 10g glucose in 100g solution.</p>
            </div>

            <div class="formula-card">
                <h3>Volume Percentage (V/V)</h3>
                <div class="formula">Volume % = (Volume of component / Total volume of solution) × 100</div>
                <p>Common for liquid solutions. Example: 10% ethanol means 10mL ethanol in 100mL solution.</p>
            </div>

            <div class="formula-card">
                <h3>Molarity (M)</h3>
                <div class="formula">Molarity = Moles of solute / Volume of solution (L)</div>
                <p>Most common in chemistry. Temperature dependent.</p>
            </div>

            <div class="formula-card">
                <h3>Molality (m)</h3>
                <div class="formula">Molality = Moles of solute / Mass of solvent (kg)</div>
                <p>Temperature independent. Used in colligative properties.</p>
            </div>

            <div class="formula-card">
                <h3>Mole Fraction (χ)</h3>
                <div class="formula">χ = Moles of component / Total moles of all components</div>
                <p>Unitless. Sum of all mole fractions = 1</p>
            </div>
        </div>

        <!-- Calculators Tab -->
        <div id="calculators" class="tab-content">
            <h2>Interactive Calculators</h2>
            <div class="calculator-grid">
                <!-- Mass Percentage Calculator -->
                <div class="calculator-card">
                    <h3>📏 Mass Percentage Calculator</h3>
                    <div class="input-group">
                        <label>Mass of Solute (g):</label>
                        <input type="number" id="mass-solute" placeholder="Enter mass of solute">
                    </div>
                    <div class="input-group">
                        <label>Mass of Solvent (g):</label>
                        <input type="number" id="mass-solvent" placeholder="Enter mass of solvent">
                    </div>
                    <button class="calculate-btn" onclick="calculateMassPercentage()">Calculate</button>
                    <div id="mass-result" class="result" style="display:none;"></div>
                </div>

                <!-- Molarity Calculator -->
                <div class="calculator-card">
                    <h3>⚗️ Molarity Calculator</h3>
                    <div class="input-group">
                        <label>Moles of Solute:</label>
                        <input type="number" id="moles-solute" placeholder="Enter moles of solute">
                    </div>
                    <div class="input-group">
                        <label>Volume of Solution (L):</label>
                        <input type="number" id="volume-solution" placeholder="Enter volume in liters">
                    </div>
                    <button class="calculate-btn" onclick="calculateMolarity()">Calculate</button>
                    <div id="molarity-result" class="result" style="display:none;"></div>
                </div>

                <!-- Molality Calculator -->
                <div class="calculator-card">
                    <h3>🏺 Molality Calculator</h3>
                    <div class="input-group">
                        <label>Moles of Solute:</label>
                        <input type="number" id="molality-moles" placeholder="Enter moles of solute">
                    </div>
                    <div class="input-group">
                        <label>Mass of Solvent (kg):</label>
                        <input type="number" id="mass-solvent-kg" placeholder="Enter mass of solvent in kg">
                    </div>
                    <button class="calculate-btn" onclick="calculateMolality()">Calculate</button>
                    <div id="molality-result" class="result" style="display:none;"></div>
                </div>

                <!-- Mole Fraction Calculator -->
                <div class="calculator-card">
                    <h3>🔢 Mole Fraction Calculator</h3>
                    <div class="input-group">
                        <label>Moles of Component:</label>
                        <input type="number" id="moles-component" placeholder="Enter moles of component">
                    </div>
                    <div class="input-group">
                        <label>Total Moles:</label>
                        <input type="number" id="total-moles" placeholder="Enter total moles">
                    </div>
                    <button class="calculate-btn" onclick="calculateMoleFraction()">Calculate</button>
                    <div id="mole-fraction-result" class="result" style="display:none;"></div>
                </div>
            </div>
        </div>

        <!-- Visualizer Tab -->
        <div id="visualizer" class="tab-content">
            <div class="visual-container">
                <h2>🔬 Easy Concentration Visualizer</h2>
                <p>See how concentration affects your solution - drag the slider and watch the magic happen!</p>
                
                <!-- Simple Control Section -->
                <div style="text-align: center; margin-bottom: 30px; background: #f0f4ff; padding: 20px; border-radius: 15px;">
                    <h3 style="color: #667eea; margin-bottom: 20px;">🎛️ Control Panel</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; align-items: center;">
                        <div>
                            <label style="font-size: 18px; font-weight: bold; color: #2d3748;">Choose Your Solution:</label>
                            <select id="solution-type" onchange="changeSolution()" style="width: 100%; padding: 12px; font-size: 16px; margin-top: 10px; border-radius: 8px; border: 2px solid #667eea;">
                                <option value="nacl">🧂 Salt Water (NaCl)</option>
                                <option value="glucose">🍯 Sugar Water (Glucose)</option>
                                <option value="ethanol">🍷 Alcohol (Ethanol)</option>
                                <option value="cuso4">💙 Blue Copper Solution (CuSO₄)</option>
                                <option value="kmno4">💜 Purple Permanganate (KMnO₄)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label style="font-size: 18px; font-weight: bold; color: #2d3748;">Concentration: <span id="slider-value" style="color: #667eea;">0</span>%</label>
                            <input type="range" id="concentration-slider" min="0" max="100" value="0" 
                                   class="modern-slider" oninput="updateVisualization()" 
                                   style="width: 100%; margin-top: 10px;">
                            <div style="display: flex; justify-content: space-between; font-size: 12px; color: #666; margin-top: 5px;">
                                <span>Dilute (0%)</span>
                                <span>Concentrated (100%)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visual Display Section -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 30px;">
                    
                    <!-- Beaker Visualization -->
                    <div style="text-align: center; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <h3 style="color: #4a5568; margin-bottom: 20px;">🧪 Your Solution</h3>
                        <div class="beaker-3d">
                            <div class="beaker-main">
                                <div class="solution-3d" id="visual-solution">
                                    <div class="particles" id="particles"></div>
                                </div>
                                <div class="measurement-marks">
                                    <div class="mark" style="bottom: 80%;">100mL</div>
                                    <div class="mark" style="bottom: 60%;">75mL</div>
                                    <div class="mark" style="bottom: 40%;">50mL</div>
                                    <div class="mark" style="bottom: 20%;">25mL</div>
                                </div>
                            </div>
                            <div class="beaker-rim"></div>
                        </div>
                        <div class="concentration-display">
                            <span id="conc-display">0%</span>
                            <div class="concentration-type">Concentration</div>
                        </div>
                        <p style="margin-top: 15px; color: #666; font-size: 14px;">
                            Watch the color get <strong>darker</strong> and see <strong>particles</strong> as you increase concentration!
                        </p>
                    </div>
                    
                    <!-- Properties Display -->
                    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <h3 style="color: #4a5568; margin-bottom: 20px;">📊 What Happens to Your Solution?</h3>
                        <div id="properties-info" style="font-size: 16px; line-height: 1.8;"></div>
                        
                        <div style="margin-top: 25px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #28a745;">
                            <h4 style="color: #155724; margin-bottom: 10px;">💡 Did You Know?</h4>
                            <p id="fun-fact" style="color: #155724; margin: 0;"></p>
                        </div>
                    </div>
                </div>

                <!-- Simple Molecular View -->
                <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center;">
                    <h3 style="color: #4a5568; margin-bottom: 20px;">🔬 Zoom In: See the Molecules!</h3>
                    <p style="color: #666; margin-bottom: 20px;">Blue dots = Water molecules, Colored dots = Your chosen solute</p>
                    
                    <div style="display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap;">
                        <canvas id="molecular-canvas" width="400" height="200" style="border: 3px solid #e2e8f0; border-radius: 10px; background: #f8f9fa;"></canvas>
                        
                        <div style="text-align: left;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="width: 20px; height: 20px; background: #3498db; border-radius: 50%;"></div>
                                <span style="font-size: 16px; font-weight: 500;">Water (H₂O)</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div id="solute-color-indicator" style="width: 20px; height: 20px; background: #e74c3c; border-radius: 50%;"></div>
                                <span id="solute-label" style="font-size: 16px; font-weight: 500;">Salt (NaCl)</span>
                            </div>
                            <div style="margin-top: 15px; font-size: 14px; color: #666;">
                                <strong>More concentration = More colored dots!</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Real-world Examples -->
                <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-top: 30px;">
                    <h3 style="color: #4a5568; margin-bottom: 20px; text-align: center;">🌍 Try These Real Examples!</h3>
                    <p style="text-align: center; color: #666; margin-bottom: 25px;">Click any card to see real-world concentrations</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div class="example-card" onclick="setExample('medical')" style="cursor: pointer; position: relative;">
                            <div class="example-icon">💊</div>
                            <h4>Medical Saline</h4>
                            <p><strong>0.9% Salt</strong></p>
                            <small style="color: #666;">What doctors use for IV drips</small>
                        </div>
                        
                        <div class="example-card" onclick="setExample('seawater')" style="cursor: pointer;">
                            <div class="example-icon">🌊</div>
                            <h4>Ocean Water</h4>
                            <p><strong>3.5% Salt</strong></p>
                            <small style="color: #666;">Why sea water tastes salty</small>
                        </div>
                        
                        <div class="example-card" onclick="setExample('alcohol')" style="cursor: pointer;">
                            <div class="example-icon">🍷</div>
                            <h4>Wine</h4>
                            <p><strong>12% Alcohol</strong></p>
                            <small style="color: #666;">Typical wine alcohol content</small>
                        </div>
                        
                        <div class="example-card" onclick="setExample('vinegar')" style="cursor: pointer;">
                            <div class="example-icon">🥗</div>
                            <h4>Household Vinegar</h4>
                            <p><strong>5% Acetic Acid</strong></p>
                            <small style="color: #666;">What's in your kitchen</small>
                        </div>
                    </div>
                </div>

                <!-- Simple Comparison Tool -->
                <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-top: 30px; text-align: center;">
                    <h3 style="color: #4a5568; margin-bottom: 20px;">📊 Compare Different Solutions</h3>
                    <p style="color: #666; margin-bottom: 20px;">Set your concentration above, then add it to compare with others!</p>
                    
                    <div style="margin-bottom: 20px;">
                        <button onclick="addToComparison()" class="add-btn" style="margin-right: 10px;">➕ Add Current Solution</button>
                        <button onclick="clearComparison()" class="clear-btn">🗑️ Clear All</button>
                    </div>
                    
                    <canvas id="comparison-chart" width="600" height="300" style="border: 2px solid #e2e8f0; border-radius: 10px; background: #f8f9fa; max-width: 100%;"></canvas>
                </div>
            </div>
        </div>

        <!-- Practice Tab -->
        <div id="practice" class="tab-content">
            <div class="quiz-container">
                <h2>🎯 Practice Problems</h2>
                <div id="quiz-questions"></div>
                <button class="calculate-btn" onclick="checkAnswers()" style="margin-top: 20px;">Check Answers</button>
                <div id="quiz-results" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Comparison Tab -->
        <div id="comparison" class="tab-content">
            <h2>📋 Comparison of Concentration Units</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Unit</th>
                        <th>Formula</th>
                        <th>Temperature Dependent</th>
                        <th>Common Uses</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Mass Percentage</strong></td>
                        <td>(Mass of solute / Total mass) × 100</td>
                        <td>No</td>
                        <td>Industrial processes</td>
                        <td>10% NaCl solution</td>
                    </tr>
                    <tr>
                        <td><strong>Volume Percentage</strong></td>
                        <td>(Volume of solute / Total volume) × 100</td>
                        <td>Yes</td>
                        <td>Liquid-liquid solutions</td>
                        <td>70% ethanol</td>
                    </tr>
                    <tr>
                        <td><strong>Molarity</strong></td>
                        <td>Moles of solute / Volume of solution (L)</td>
                        <td>Yes</td>
                        <td>Laboratory calculations</td>
                        <td>0.1 M HCl</td>
                    </tr>
                    <tr>
                        <td><strong>Molality</strong></td>
                        <td>Moles of solute / Mass of solvent (kg)</td>
                        <td>No</td>
                        <td>Colligative properties</td>
                        <td>0.5 m glucose</td>
                    </tr>
                    <tr>
                        <td><strong>Mole Fraction</strong></td>
                        <td>Moles of component / Total moles</td>
                        <td>No</td>
                        <td>Vapor pressure, gas mixtures</td>
                        <td>χ = 0.25</td>
                    </tr>
                    <tr>
                        <td><strong>Parts per Million</strong></td>
                        <td>(Mass of solute / Total mass) × 10⁶</td>
                        <td>No</td>
                        <td>Trace concentrations</td>
                        <td>5.8 ppm O₂ in seawater</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Solution data
        const solutions = {
            nacl: { 
                color: [52, 152, 219], 
                name: 'NaCl', 
                density: 1.2,
                viscosity: 'Low',
                conductivity: 'High'
            },
            glucose: { 
                color: [241, 196, 15], 
                name: 'Glucose', 
                density: 1.1,
                viscosity: 'Medium',
                conductivity: 'Low'
            },
            ethanol: { 
                color: [155, 89, 182], 
                name: 'Ethanol', 
                density: 0.8,
                viscosity: 'Low',
                conductivity: 'Very Low'
            },
            cuso4: { 
                color: [41, 128, 185], 
                name: 'CuSO₄', 
                density: 1.3,
                viscosity: 'Medium',
                conductivity: 'High'
            },
            kmno4: { 
                color: [142, 68, 173], 
                name: 'KMnO₄', 
                density: 1.25,
                viscosity: 'Medium',
                conductivity: 'High'
            }
        };

        let currentSolution = 'nacl';
        let comparisonData = [];
        let molecularCanvas, molecularCtx;
        let comparisonCanvas, comparisonCtx;

        // Tab switching functionality
        function showTab(tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            
            const tabBtns = document.querySelectorAll('.tab-btn');
            tabBtns.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Calculator functions
        function calculateMassPercentage() {
            const massSolute = parseFloat(document.getElementById('mass-solute').value);
            const massSolvent = parseFloat(document.getElementById('mass-solvent').value);
            
            if (isNaN(massSolute) || isNaN(massSolvent)) {
                alert('Please enter valid numbers');
                return;
            }
            
            const totalMass = massSolute + massSolvent;
            const massPercentage = (massSolute / totalMass) * 100;
            
            const resultDiv = document.getElementById('mass-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <strong>Results:</strong><br>
                Total mass of solution: ${totalMass.toFixed(2)} g<br>
                Mass percentage of solute: ${massPercentage.toFixed(2)}%<br>
                Mass percentage of solvent: ${(100 - massPercentage).toFixed(2)}%
            `;
        }

        function calculateMolarity() {
            const moles = parseFloat(document.getElementById('moles-solute').value);
            const volume = parseFloat(document.getElementById('volume-solution').value);
            
            if (isNaN(moles) || isNaN(volume) || volume <= 0) {
                alert('Please enter valid numbers');
                return;
            }
            
            const molarity = moles / volume;
            
            const resultDiv = document.getElementById('molarity-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <strong>Result:</strong><br>
                Molarity = ${molarity.toFixed(3)} M<br>
                This means ${moles} moles of solute in ${volume} L of solution
            `;
        }

        function calculateMolality() {
            const moles = parseFloat(document.getElementById('molality-moles').value);
            const mass = parseFloat(document.getElementById('mass-solvent-kg').value);
            
            if (isNaN(moles) || isNaN(mass) || mass <= 0) {
                alert('Please enter valid numbers');
                return;
            }
            
            const molality = moles / mass;
            
            const resultDiv = document.getElementById('molality-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <strong>Result:</strong><br>
                Molality = ${molality.toFixed(3)} m<br>
                This means ${moles} moles of solute in ${mass} kg of solvent
            `;
        }

        function calculateMoleFraction() {
            const molesComponent = parseFloat(document.getElementById('moles-component').value);
            const totalMoles = parseFloat(document.getElementById('total-moles').value);
            
            if (isNaN(molesComponent) || isNaN(totalMoles) || totalMoles <= 0) {
                alert('Please enter valid numbers');
                return;
            }
            
            const moleFraction = molesComponent / totalMoles;
            
            const resultDiv = document.getElementById('mole-fraction-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <strong>Result:</strong><br>
                Mole fraction = ${moleFraction.toFixed(4)}<br>
                As percentage: ${(moleFraction * 100).toFixed(2)}%<br>
                Remaining components: ${(1 - moleFraction).toFixed(4)}
            `;
        }

        // Enhanced visualization functions
        function updateVisualization() {
            const slider = document.getElementById('concentration-slider');
            if (!slider) return;
            
            const concentration = parseInt(slider.value);
            const solution = document.getElementById('visual-solution');
            const display = document.getElementById('conc-display');
            const sliderValue = document.getElementById('slider-value');
            
            if (sliderValue) sliderValue.textContent = concentration;
            
            // Update 3D beaker
            if (solution) {
                solution.style.height = concentration + '%';
                
                const solutionData = solutions[currentSolution];
                const [r, g, b] = solutionData.color;
                const opacity = 0.3 + (concentration / 100) * 0.7;
                
                solution.style.background = `linear-gradient(135deg, 
                    rgba(${r}, ${g}, ${b}, ${opacity}) 0%, 
                    rgba(${Math.max(0, r-20)}, ${Math.max(0, g-20)}, ${Math.max(0, b-20)}, ${Math.min(1, opacity + 0.1)}) 100%)`;
            }
            
            // Update display
            const unit = document.getElementById('conc-unit')?.value || 'mass';
            let displayValue = concentration;
            let unitText = '%';
            
            if (unit === 'molarity') {
                displayValue = (concentration * 0.1).toFixed(2);
                unitText = 'M';
            } else if (unit === 'molality') {
                displayValue = (concentration * 0.15).toFixed(2);
                unitText = 'm';
            }
            
            if (display) display.textContent = displayValue + unitText;
            
            // Update particles
            updateParticles(concentration);
            
            // Update properties
            updateProperties(concentration);
            
            // Update molecular view
            drawMolecularView(concentration);
        }

        function updateParticles(concentration) {
            const particlesContainer = document.getElementById('particles');
            if (!particlesContainer) return;
            
            particlesContainer.innerHTML = '';
            
            const particleCount = Math.floor(concentration / 5);
            const solutionData = solutions[currentSolution];
            const [r, g, b] = solutionData.color;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 90 + '%';
                particle.style.top = Math.random() * 80 + '%';
                particle.style.width = (Math.random() * 4 + 2) + 'px';
                particle.style.height = particle.style.width;
                particle.style.background = `rgba(${Math.max(0, r-30)}, ${Math.max(0, g-30)}, ${Math.max(0, b-30)}, 0.8)`;
                particle.style.animationDelay = Math.random() * 3 + 's';
                particlesContainer.appendChild(particle);
            }
        }

        function updateProperties(concentration) {
            const info = document.getElementById('properties-info');
            if (!info) return;
            
            const solutionData = solutions[currentSolution];
            
            let category, effects, color;
            if (concentration < 10) {
                category = '💧 Very Dilute';
                effects = '• Almost like pure water<br>• Very light color<br>• Properties barely changed';
                color = '#3498db';
            } else if (concentration < 30) {
                category = '🌊 Dilute';
                effects = '• Noticeable color change<br>• Density slightly increased<br>• Boiling point rises a bit';
                color = '#2980b9';
            } else if (concentration < 70) {
                category = '🧪 Concentrated';
                effects = '• Strong color and taste<br>• Much denser than water<br>• Significant property changes';
                color = '#8e44ad';
            } else {
                category = '⚡ Very Concentrated';
                effects = '• Very dark/intense color<br>• Much heavier than water<br>• Dramatic property changes';
                color = '#6c3483';
            }
            
            // Add fun facts
            const funFacts = {
                'nacl': [
                    'Dead Sea has 34% salt - so dense you float easily!',
                    'Your blood is about 0.9% salt - same as medical saline!',
                    'Salt water conducts electricity - that\'s why it\'s dangerous with electronics!',
                    'Ocean water is 3.5% salt - that\'s why it tastes so salty!'
                ],
                'glucose': [
                    'Your blood sugar is normally about 0.1% glucose',
                    'Honey is about 40% glucose - nature\'s energy drink!',
                    'Plants make glucose through photosynthesis',
                    'Sports drinks contain about 6% glucose for quick energy'
                ],
                'ethanol': [
                    'Beer is typically 5% alcohol, wine is 12%',
                    'Hand sanitizer needs 60%+ alcohol to kill germs',
                    'Pure ethanol (100%) is used as fuel in some cars',
                    'Rubbing alcohol is usually 70% ethanol'
                ],
                'cuso4': [
                    'Copper sulfate turns from white to blue when water is added',
                    'Used in swimming pools to prevent algae growth',
                    'Farmers use it as a fungicide to protect crops',
                    'The blue color comes from copper ions in solution'
                ],
                'kmno4': [
                    'Just a tiny amount makes water purple!',
                    'Used to disinfect water in developing countries',
                    'Can oxidize (burn) organic materials',
                    'Used in chemistry labs as a strong oxidizing agent'
                ]
            };
            
            const factIndex = Math.floor(concentration / 25);
            const currentFacts = funFacts[currentSolution];
            const selectedFact = currentFacts[Math.min(factIndex, currentFacts.length - 1)];
            
            info.innerHTML = `
                <div style="margin-bottom: 15px;">
                    <h4 style="color: ${color}; margin-bottom: 10px;">${category}</h4>
                    <div style="font-size: 15px; line-height: 1.6;">${effects}</div>
                </div>
                <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                    <strong>Density:</strong> ~${(solutionData.density + concentration * 0.01).toFixed(2)} g/mL<br>
                    <strong>Electrical Conductivity:</strong> ${solutionData.conductivity}<br>
                    <strong>Viscosity:</strong> ${solutionData.viscosity}
                </div>
            `;
            
            // Update fun fact
            const funFactElement = document.getElementById('fun-fact');
            if (funFactElement) {
                funFactElement.textContent = selectedFact;
            }
        }

        function changeSolution() {
            const solutionSelect = document.getElementById('solution-type');
            if (solutionSelect) {
                currentSolution = solutionSelect.value;
                const solutionData = solutions[currentSolution];
                const soluteLabel = document.getElementById('solute-label');
                if (soluteLabel) {
                    const labels = {
                        'nacl': 'Salt (NaCl)',
                        'glucose': 'Sugar (Glucose)',
                        'ethanol': 'Alcohol (Ethanol)',
                        'cuso4': 'Copper Sulfate (CuSO₄)',
                        'kmno4': 'Permanganate (KMnO₄)'
                    };
                    soluteLabel.textContent = labels[currentSolution];
                }
                
                // Update solute color indicator
                const colorIndicator = document.getElementById('solute-color-indicator');
                if (colorIndicator) {
                    const [r, g, b] = solutionData.color;
                    colorIndicator.style.background = `rgb(${r}, ${g}, ${b})`;
                }
                
                updateVisualization();
            }
        }

        function updateConcentrationUnit() {
            const unit = document.getElementById('conc-unit')?.value;
            const typeDisplay = document.getElementById('conc-type');
            
            if (typeDisplay && unit) {
                switch(unit) {
                    case 'mass':
                        typeDisplay.textContent = 'Mass/Mass';
                        break;
                    case 'volume':
                        typeDisplay.textContent = 'Volume/Volume';
                        break;
                    case 'molarity':
                        typeDisplay.textContent = 'Molarity';
                        break;
                    case 'molality':
                        typeDisplay.textContent = 'Molality';
                        break;
                }
            }
            
            updateVisualization();
        }

        function drawMolecularView(concentration) {
            if (!molecularCtx) return;
            
            molecularCtx.clearRect(0, 0, 400, 200);
            
            // Background
            molecularCtx.fillStyle = '#f8f9fa';
            molecularCtx.fillRect(0, 0, 400, 200);
            
            const solutionData = solutions[currentSolution];
            const [r, g, b] = solutionData.color;
            
            // Draw water molecules (blue)
            const waterCount = Math.floor((100 - concentration) * 2);
            for (let i = 0; i < waterCount; i++) {
                molecularCtx.fillStyle = '#3498db';
                molecularCtx.beginPath();
                molecularCtx.arc(
                    Math.random() * 380 + 10,
                    Math.random() * 180 + 10,
                    3,
                    0,
                    2 * Math.PI
                );
                molecularCtx.fill();
            }
            
            // Draw solute molecules
            const soluteCount = Math.floor(concentration * 1.5);
            for (let i = 0; i < soluteCount; i++) {
                molecularCtx.fillStyle = `rgb(${r}, ${g}, ${b})`;
                molecularCtx.beginPath();
                molecularCtx.arc(
                    Math.random() * 380 + 10,
                    Math.random() * 180 + 10,
                    4,
                    0,
                    2 * Math.PI
                );
                molecularCtx.fill();
            }
        }

        function drawComparisonChart() {
            if (!comparisonCtx || comparisonData.length === 0) return;
            
            comparisonCtx.clearRect(0, 0, 600, 300);
            
            // Background
            comparisonCtx.fillStyle = '#f8f9fa';
            comparisonCtx.fillRect(0, 0, 600, 300);
            
            // Chart properties
            const margin = 50;
            const chartWidth = 600 - 2 * margin;
            const chartHeight = 300 - 2 * margin;
            const barWidth = chartWidth / comparisonData.length - 20;
            
            // Draw axes
            comparisonCtx.strokeStyle = '#333';
            comparisonCtx.lineWidth = 2;
            comparisonCtx.beginPath();
            comparisonCtx.moveTo(margin, margin);
            comparisonCtx.lineTo(margin, margin + chartHeight);
            comparisonCtx.lineTo(margin + chartWidth, margin + chartHeight);
            comparisonCtx.stroke();
            
            // Draw bars
            comparisonData.forEach((data, index) => {
                const x = margin + index * (barWidth + 20) + 10;
                const barHeight = (data.concentration / 100) * chartHeight;
                const y = margin + chartHeight - barHeight;
                
                // Bar gradient
                const gradient = comparisonCtx.createLinearGradient(0, y, 0, y + barHeight);
                const [r, g, b] = solutions[data.solution].color;
                gradient.addColorStop(0, `rgba(${r}, ${g}, ${b}, 0.8)`);
                gradient.addColorStop(1, `rgba(${Math.max(0, r-30)}, ${Math.max(0, g-30)}, ${Math.max(0, b-30)}, 1)`);
                
                comparisonCtx.fillStyle = gradient;
                comparisonCtx.fillRect(x, y, barWidth, barHeight);
                
                // Bar outline
                comparisonCtx.strokeStyle = '#333';
                comparisonCtx.lineWidth = 1;
                comparisonCtx.strokeRect(x, y, barWidth, barHeight);
                
                // Labels
                comparisonCtx.fillStyle = '#333';
                comparisonCtx.font = '12px Arial';
                comparisonCtx.textAlign = 'center';
                comparisonCtx.fillText(
                    solutions[data.solution].name,
                    x + barWidth / 2,
                    margin + chartHeight + 20
                );
                comparisonCtx.fillText(
                    data.concentration + '%',
                    x + barWidth / 2,
                    y - 10
                );
            });
            
            // Y-axis labels
            comparisonCtx.fillStyle = '#666';
            comparisonCtx.font = '10px Arial';
            comparisonCtx.textAlign = 'right';
            for (let i = 0; i <= 10; i++) {
                const y = margin + chartHeight - (i / 10) * chartHeight;
                comparisonCtx.fillText(i * 10 + '%', margin - 10, y + 3);
                
                // Grid lines
                comparisonCtx.strokeStyle = '#e0e0e0';
                comparisonCtx.lineWidth = 1;
                comparisonCtx.beginPath();
                comparisonCtx.moveTo(margin, y);
                comparisonCtx.lineTo(margin + chartWidth, y);
                comparisonCtx.stroke();
            }
        }

        function addToComparison() {
            const slider = document.getElementById('concentration-slider');
            if (!slider) return;
            
            const concentration = parseInt(slider.value);
            const solution = currentSolution;
            
            // Check if this solution already exists in comparison
            const existingIndex = comparisonData.findIndex(data => data.solution === solution);
            
            if (existingIndex >= 0) {
                comparisonData[existingIndex].concentration = concentration;
            } else {
                comparisonData.push({ solution, concentration });
            }
            
            drawComparisonChart();
        }

        function clearComparison() {
            comparisonData = [];
            if (comparisonCtx) {
                comparisonCtx.clearRect(0, 0, 600, 300);
            }
        }

        function setExample(example) {
            const examples = {
                seawater: { solution: 'nacl', concentration: 4 },
                medical: { solution: 'nacl', concentration: 1 },
                alcohol: { solution: 'ethanol', concentration: 12 },
                vinegar: { solution: 'ethanol', concentration: 5 }
            };
            
            const exampleData = examples[example];
            if (exampleData) {
                const solutionSelect = document.getElementById('solution-type');
                const slider = document.getElementById('concentration-slider');
                
                if (solutionSelect) solutionSelect.value = exampleData.solution;
                if (slider) slider.value = exampleData.concentration;
                
                currentSolution = exampleData.solution;
                changeSolution();
            }
        }

        // Quiz functionality - 10 comprehensive questions
        const quizQuestions = [
            {
                question: "What is the mass percentage of NaCl in a solution containing 5g NaCl in 95g water?",
                options: ["5%", "10%", "15%", "20%"],
                correct: 0,
                explanation: "Mass % = (5g NaCl / 100g total solution) × 100 = 5%"
            },
            {
                question: "Which concentration unit is temperature independent?",
                options: ["Molarity", "Volume percentage", "Molality", "All of the above"],
                correct: 2,
                explanation: "Molality is temperature independent because it uses mass of solvent, not volume which changes with temperature"
            },
            {
                question: "If χ_A = 0.3 in a binary mixture, what is χ_B?",
                options: ["0.3", "0.7", "1.0", "Cannot determine"],
                correct: 1,
                explanation: "In any solution, sum of all mole fractions = 1, so χ_B = 1 - 0.3 = 0.7"
            },
            {
                question: "Which unit is most commonly used for trace concentrations?",
                options: ["Molarity", "Molality", "PPM", "Mass percentage"],
                correct: 2,
                explanation: "Parts per million (PPM) is used for very small concentrations like pollutants in water"
            },
            {
                question: "Calculate the molarity of a solution containing 0.5 moles of glucose in 2 liters of solution:",
                options: ["0.25 M", "0.5 M", "1.0 M", "2.0 M"],
                correct: 0,
                explanation: "Molarity = moles of solute / volume in liters = 0.5 mol / 2 L = 0.25 M"
            },
            {
                question: "What happens to molarity when temperature increases?",
                options: ["Increases", "Decreases", "Remains constant", "Depends on solute"],
                correct: 1,
                explanation: "As temperature increases, volume expands, so molarity (moles/volume) decreases"
            },
            {
                question: "In a 20% (w/w) ethylene glycol solution, what is the mass of water in 100g solution?",
                options: ["20g", "80g", "100g", "120g"],
                correct: 1,
                explanation: "20% ethylene glycol means 20g solute in 100g solution, so water = 100g - 20g = 80g"
            },
            {
                question: "Which concentration unit is best for studying colligative properties?",
                options: ["Molarity", "Molality", "Mass percentage", "Volume percentage"],
                correct: 1,
                explanation: "Molality is used for colligative properties because it's temperature independent"
            },
            {
                question: "Calculate mole fraction of benzene in a solution of 30g benzene (C₆H₆) and 42g toluene (C₇H₈). [Molar mass: C₆H₆ = 78 g/mol, C₇H₈ = 92 g/mol]",
                options: ["0.30", "0.46", "0.54", "0.70"],
                correct: 1,
                explanation: "Moles of benzene = 30/78 = 0.385 mol, Moles of toluene = 42/92 = 0.457 mol. χ_benzene = 0.385/(0.385+0.457) = 0.46"
            },
            {
                question: "A solution contains 5.8 ppm of dissolved oxygen. This means:",
                options: ["5.8g O₂ in 1000g solution", "5.8mg O₂ in 1000g solution", "5.8g O₂ in 1000000g solution", "5.8kg O₂ in 1000g solution"],
                correct: 2,
                explanation: "PPM means parts per million. 5.8 ppm = 5.8g of O₂ in 1,000,000g (10⁶g) of solution"
            }
        ];

        function loadQuiz() {
            const quizContainer = document.getElementById('quiz-questions');
            if (!quizContainer) return;
            
            quizContainer.innerHTML = '';
            
            quizQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <h4>Question ${index + 1}: ${q.question}</h4>
                    <div class="options">
                        ${q.options.map((option, optIndex) => 
                            `<div class="option" onclick="selectOption(${index}, ${optIndex})" data-question="${index}" data-option="${optIndex}">
                                ${option}
                            </div>`
                        ).join('')}
                    </div>
                    <div class="explanation" id="explanation-${index}" style="display:none; margin-top:10px; padding:10px; background:#f8f9fa; border-radius:5px;">
                        <strong>Explanation:</strong> ${q.explanation}
                    </div>
                `;
                quizContainer.appendChild(questionDiv);
            });
        }

        function selectOption(questionIndex, optionIndex) {
            const options = document.querySelectorAll(`[data-question="${questionIndex}"]`);
            options.forEach(option => option.classList.remove('selected'));
            
            const selectedOption = document.querySelector(`[data-question="${questionIndex}"][data-option="${optionIndex}"]`);
            if (selectedOption) selectedOption.classList.add('selected');
        }

        function checkAnswers() {
            let score = 0;
            
            quizQuestions.forEach((q, index) => {
                const selectedOption = document.querySelector(`[data-question="${index}"].selected`);
                const explanation = document.getElementById(`explanation-${index}`);
                
                if (selectedOption) {
                    const selectedIndex = parseInt(selectedOption.dataset.option);
                    const options = document.querySelectorAll(`[data-question="${index}"]`);
                    
                    // Reset all options
                    options.forEach(opt => {
                        opt.classList.remove('correct', 'incorrect');
                    });
                    
                    // Mark correct answer
                    const correctOption = document.querySelector(`[data-question="${index}"][data-option="${q.correct}"]`);
                    if (correctOption) correctOption.classList.add('correct');
                    
                    if (selectedIndex === q.correct) {
                        score++;
                    } else {
                        selectedOption.classList.add('incorrect');
                    }
                    
                    if (explanation) explanation.style.display = 'block';
                }
            });
            
            const resultsDiv = document.getElementById('quiz-results');
            if (resultsDiv) {
                const percentage = (score / quizQuestions.length) * 100;
                resultsDiv.innerHTML = `
                    <h3>Your Score: ${score}/${quizQuestions.length} (${percentage.toFixed(1)}%)</h3>
                    <p>${percentage >= 80 ? 'Excellent work! 🎉' : percentage >= 60 ? 'Good job! Keep practicing! 👍' : 'Keep studying and try again! 📚'}</p>
                `;
            }
        }

        // Initialize enhanced visualizer
        function initializeEnhancedVisualizer() {
            // Initialize molecular canvas
            molecularCanvas = document.getElementById('molecular-canvas');
            if (molecularCanvas) {
                molecularCtx = molecularCanvas.getContext('2d');
                drawMolecularView(0);
            }
            
            // Initialize comparison canvas
            comparisonCanvas = document.getElementById('comparison-chart');
            if (comparisonCanvas) {
                comparisonCtx = comparisonCanvas.getContext('2d');
            }
            
            // Initial visualization update
            updateVisualization();
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadQuiz();
            initializeEnhancedVisualizer();
        });
    </script>
</body>
</html>
