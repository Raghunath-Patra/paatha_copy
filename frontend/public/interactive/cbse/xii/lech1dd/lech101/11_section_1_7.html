<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abnormal Molar Masses - Interactive Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 50px;
            padding: 5px;
            backdrop-filter: blur(10px);
        }

        .tab {
            background: transparent;
            border: none;
            color: white;
            padding: 15px 30px;
            margin: 0 5px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            font-weight: 500;
        }

        .tab.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transform: translateY(-2px);
        }

        .tab:hover:not(.active) {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }

        .content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            animation: fadeInUp 0.8s ease-out;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        .interactive-panel {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            color: white;
        }

        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
            align-items: center;
        }

        .control {
            display: flex;
            flex-direction: column;
            min-width: 200px;
        }

        .control label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .interactive-panel .control label {
            color: white;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        input[type="number"], select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        input[type="number"]:focus, select:focus {
            border-color: #667eea;
            outline: none;
        }

        .molecule-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 15px;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #667eea 100%);
            border-radius: 20px;
            margin: 20px 0;
            min-height: 300px;
            position: relative;
            overflow: hidden;
        }

        .molecule-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: moveBackground 20s linear infinite;
            pointer-events: none;
        }

        .molecule {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px 10px;
            background: rgba(255,255,255,0.15);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            animation: float 4s ease-in-out infinite;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .molecule::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            border-radius: 22px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .molecule:hover::before {
            opacity: 0.7;
        }

        .molecule.dissociated {
            transform: translateY(-20px) scale(1.1);
            background: rgba(255,107,107,0.2);
            animation: bounce 2s ease-in-out infinite;
        }

        .molecule.associated {
            transform: scale(1.3) rotateY(10deg);
            background: rgba(116,185,255,0.3);
            animation: pulse 3s ease-in-out infinite;
        }

        .molecule.neutral {
            background: rgba(255,255,255,0.15);
        }

        .atom-group {
            display: flex;
            align-items: center;
            gap: 5px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .atom {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 11px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .atom:hover {
            transform: scale(1.2);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .atom::after {
            content: attr(data-charge);
            position: absolute;
            top: -5px;
            right: -5px;
            background: rgba(255,255,255,0.9);
            color: #333;
            font-size: 8px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .k-ion { 
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            box-shadow: 0 0 15px rgba(231,76,60,0.5);
        }
        .cl-ion { 
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            box-shadow: 0 0 15px rgba(46,204,113,0.5);
        }
        .na-ion { 
            background: linear-gradient(135deg, #f39c12, #e67e22);
            box-shadow: 0 0 15px rgba(243,156,18,0.5);
        }
        .mg-ion { 
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            box-shadow: 0 0 15px rgba(155,89,182,0.5);
        }
        .so4-ion { 
            background: linear-gradient(135deg, #34495e, #2c3e50);
            box-shadow: 0 0 15px rgba(52,73,94,0.5);
        }
        .ca-ion {
            background: linear-gradient(135deg, #e67e22, #d35400);
            box-shadow: 0 0 15px rgba(230,126,34,0.5);
        }
        .compound {
            background: linear-gradient(135deg, #3498db, #2980b9);
            box-shadow: 0 0 15px rgba(52,152,219,0.5);
            width: 50px;
            height: 50px;
            font-size: 10px;
        }
        .acetic {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            box-shadow: 0 0 15px rgba(243,156,18,0.5);
            width: 45px;
            height: 45px;
            font-size: 9px;
        }

        .molecule-label {
            font-size: 11px;
            font-weight: bold;
            color: rgba(255,255,255,0.9);
            text-align: center;
            margin-top: 5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .bond {
            width: 2px;
            height: 20px;
            background: rgba(255,255,255,0.7);
            margin: 0 5px;
            border-radius: 1px;
            animation: bondVibrate 1s ease-in-out infinite;
        }

        .hydrogen-bond {
            width: 1px;
            height: 15px;
            background: rgba(255,255,255,0.4);
            border: 1px dashed rgba(255,255,255,0.6);
            margin: 0 3px;
            animation: bondVibrate 2s ease-in-out infinite;
        }

        @keyframes moveBackground {
            0% { transform: translate(0, 0); }
            100% { transform: translate(20px, 20px); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(-20px) scale(1.1); }
            50% { transform: translateY(-30px) scale(1.15); }
        }

        @keyframes bondVibrate {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.2); }
        }

        .results-panel {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-value {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
        }

        .formula-display {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 1.2em;
        }

        .quiz-container {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .quiz-question {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2d3436;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .quiz-option {
            background: white;
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quiz-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .quiz-option.selected {
            border-color: #00b894;
            background: #d1f2eb;
        }

        .quiz-option.correct {
            border-color: #00b894;
            background: #d1f2eb;
        }

        .quiz-option.incorrect {
            border-color: #e74c3c;
            background: #fadbd8;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .explanation {
            background: #e8f5e8;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }

        .graph-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-wrap: wrap;
            }
            
            .control-group {
                flex-direction: column;
            }
            
            .molecule-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧪 Abnormal Molar Masses</h1>
            <p>Explore van't Hoff Factor, Dissociation & Association</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showSection('concept')">📚 Concept</button>
            <button class="tab" onclick="showSection('calculator')">🧮 Calculator</button>
            <button class="tab" onclick="showSection('visualization')">🔬 Visualization</button>
            <button class="tab" onclick="showSection('examples')">📝 Examples</button>
            <button class="tab" onclick="showSection('quiz')">🎯 Quiz</button>
        </div>

        <div class="content">
            <!-- Concept Section -->
            <div id="concept" class="section active">
                <h2>🧪 Understanding Abnormal Molar Masses</h2>
                
                <div class="explanation">
                    <h3>What are Abnormal Molar Masses?</h3>
                    <p>When ionic compounds dissolve in water, they can <strong>dissociate</strong> into ions or <strong>associate</strong> to form larger particles. This changes the number of particles in solution, leading to molar masses that differ from expected values.</p>
                </div>

                <div class="interactive-panel">
                    <h3>🔍 Key Concepts</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div>
                            <h4>💥 Dissociation</h4>
                            <p>• Ionic compounds break into ions</p>
                            <p>• More particles than expected</p>
                            <p>• Lower apparent molar mass</p>
                            <p>• i > 1</p>
                        </div>
                        <div>
                            <h4>🤝 Association</h4>
                            <p>• Molecules combine together</p>
                            <p>• Fewer particles than expected</p>
                            <p>• Higher apparent molar mass</p>
                            <p>• i < 1</p>
                        </div>
                    </div>
                </div>

                <div class="formula-display">
                    <h3>van't Hoff Factor (i)</h3>
                    <div style="font-size: 1.5em; margin: 20px 0;">
                        i = <span style="color: #e74c3c;">Normal Molar Mass</span> / <span style="color: #2980b9;">Abnormal Molar Mass</span>
                    </div>
                    <div style="font-size: 1.2em;">
                        i = <span style="color: #e74c3c;">Observed Colligative Property</span> / <span style="color: #2980b9;">Calculated Colligative Property</span>
                    </div>
                </div>

                <div class="warning">
                    <h4>⚠️ Remember</h4>
                    <p>• For complete dissociation: NaCl → i = 2, CaCl₂ → i = 3</p>
                    <p>• For association: Acetic acid in benzene → i ≈ 0.5</p>
                    <p>• Real solutions have i values between theoretical limits due to ion pairing</p>
                </div>
            </div>

            <!-- Calculator Section -->
            <div id="calculator" class="section">
                <h2>🧮 van't Hoff Factor Calculator</h2>
                
                <div class="interactive-panel">
                    <h3>Calculate van't Hoff Factor</h3>
                    <div class="control-group">
                        <div class="control">
                            <label>Compound Type:</label>
                            <select id="compound-type" onchange="updateCalculator()">
                                <option value="nacl">NaCl</option>
                                <option value="kcl">KCl</option>
                                <option value="cacl2">CaCl₂</option>
                                <option value="k2so4">K₂SO₄</option>
                                <option value="mgso4">MgSO₄</option>
                                <option value="acetic">Acetic Acid (association)</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="control">
                            <label>Concentration (molality):</label>
                            <input type="number" id="concentration" value="0.1" step="0.01" min="0.001" max="1" onchange="updateCalculator()">
                        </div>
                        <div class="control">
                            <label>Temperature (K):</label>
                            <input type="number" id="temperature" value="298" step="1" min="273" max="373" onchange="updateCalculator()">
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="control">
                            <label>Observed ΔTf (K):</label>
                            <input type="number" id="observed-deltaTf" value="0.372" step="0.001" onchange="updateCalculator()">
                        </div>
                        <div class="control">
                            <label>Kf for water (K·kg/mol):</label>
                            <input type="number" id="kf-value" value="1.86" step="0.01" readonly>
                        </div>
                    </div>
                </div>

                <div class="results-panel">
                    <h3>📊 Results</h3>
                    <div class="result-item">
                        <span>Calculated ΔTf (assuming no dissociation):</span>
                        <span class="result-value" id="calc-deltaTf">0.186 K</span>
                    </div>
                    <div class="result-item">
                        <span>van't Hoff Factor (i):</span>
                        <span class="result-value" id="vant-hoff-factor">2.00</span>
                    </div>
                    <div class="result-item">
                        <span>Degree of Dissociation (α):</span>
                        <span class="result-value" id="degree-dissociation">100%</span>
                    </div>
                    <div class="result-item">
                        <span>Effective Particles:</span>
                        <span class="result-value" id="effective-particles">2.00</span>
                    </div>
                </div>

                <button class="btn" onclick="calculateExample()">🎲 Generate Random Example</button>
            </div>

            <!-- Visualization Section -->
            <div id="visualization" class="section">
                <h2>🔬 Molecular Visualization</h2>
                
                <div class="explanation">
                    <h3>🧪 What's Happening Here?</h3>
                    <p id="process-explanation">
                        <strong>Dissociation Process:</strong> Watch as ionic compounds like KCl break apart in water. Each intact KCl molecule (blue) splits into separate K⁺ (red) and Cl⁻ (green) ions. This increases the total number of particles, making the van't Hoff factor greater than 1. The more molecules that dissociate, the higher the i-factor becomes!
                    </p>
                </div>
                
                <div class="interactive-panel">
                    <h3>⚙️ Controls</h3>
                    <div class="control-group">
                        <div class="control">
                            <label>Process Type:</label>
                            <select id="process-type" onchange="updateVisualization()">
                                <option value="dissociation">Dissociation (KCl → K⁺ + Cl⁻)</option>
                                <option value="association">Association (2 CH₃COOH → Dimer)</option>
                            </select>
                        </div>
                        <div class="control">
                            <label>Extent of Process: <span id="extent-value">50%</span></label>
                            <input type="range" id="extent-slider" min="0" max="100" value="50" onchange="updateVisualization()">
                        </div>
                        <div class="control">
                            <label>Animation Speed:</label>
                            <input type="range" id="speed-slider" min="1" max="5" value="3" onchange="updateAnimationSpeed()">
                        </div>
                    </div>
                </div>

                <div class="molecule-container" id="molecule-container">
                    <!-- Molecules will be generated here -->
                </div>

                <div class="results-panel">
                    <h3>📈 Live Calculations</h3>
                    <div class="result-item">
                        <span>Initial Particles:</span>
                        <span class="result-value" id="initial-particles">16</span>
                    </div>
                    <div class="result-item">
                        <span>Final Particles:</span>
                        <span class="result-value" id="final-particles">24</span>
                    </div>
                    <div class="result-item">
                        <span>van't Hoff Factor (i):</span>
                        <span class="result-value" id="visual-vant-hoff">1.5</span>
                    </div>
                    <div class="result-item">
                        <span>Effect on Colligative Properties:</span>
                        <span class="result-value" id="colligative-effect">50% increase</span>
                    </div>
                </div>

                <button class="btn" onclick="resetVisualization()">🔄 Reset Animation</button>
            </div>

            <!-- Examples Section -->
            <div id="examples" class="section">
                <h2>📝 Worked Examples</h2>
                
                <div class="explanation">
                    <h3>Example 1: Benzoic Acid Association</h3>
                    <p><strong>Problem:</strong> 2 g of benzoic acid dissolved in 25 g benzene shows ΔTf = 1.62 K. Kf = 4.9 K·kg/mol. Find % association.</p>
                </div>

                <div class="interactive-panel">
                    <h4>Step-by-Step Solution</h4>
                    <div id="example1-steps">
                        <div class="step" style="margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                            <strong>Step 1:</strong> Calculate experimental molar mass
                            <div class="formula-display" style="background: rgba(255,255,255,0.1); margin: 10px 0;">
                                M₂ = (Kf × w₂ × 1000) / (w₁ × ΔTf) = (4.9 × 2 × 1000) / (25 × 1.62) = 242 g/mol
                            </div>
                        </div>
                    </div>
                    <button class="btn" onclick="showNextStep(1)">▶️ Next Step</button>
                </div>

                <div class="explanation">
                    <h3>Example 2: Acetic Acid Dissociation</h3>
                    <p><strong>Problem:</strong> 0.6 mL acetic acid (density 1.06 g/mL) in 1L water shows ΔTf = 0.0205°C. Find van't Hoff factor and Ka.</p>
                </div>

                <div class="interactive-panel">
                    <div class="control-group">
                        <div class="control">
                            <label>Volume of Acetic Acid (mL):</label>
                            <input type="number" id="ex2-volume" value="0.6" step="0.1" onchange="updateExample2()">
                        </div>
                        <div class="control">
                            <label>Density (g/mL):</label>
                            <input type="number" id="ex2-density" value="1.06" step="0.01" onchange="updateExample2()">
                        </div>
                        <div class="control">
                            <label>Observed ΔTf (°C):</label>
                            <input type="number" id="ex2-deltaTf" value="0.0205" step="0.0001" onchange="updateExample2()">
                        </div>
                    </div>
                    
                    <div class="results-panel">
                        <div class="result-item">
                            <span>Mass of acetic acid:</span>
                            <span class="result-value" id="ex2-mass">0.636 g</span>
                        </div>
                        <div class="result-item">
                            <span>Moles of acetic acid:</span>
                            <span class="result-value" id="ex2-moles">0.0106 mol</span>
                        </div>
                        <div class="result-item">
                            <span>Molality:</span>
                            <span class="result-value" id="ex2-molality">0.0106 m</span>
                        </div>
                        <div class="result-item">
                            <span>van't Hoff factor (i):</span>
                            <span class="result-value" id="ex2-vant-hoff">1.041</span>
                        </div>
                        <div class="result-item">
                            <span>Degree of dissociation (α):</span>
                            <span class="result-value" id="ex2-alpha">4.1%</span>
                        </div>
                        <div class="result-item">
                            <span>Ka value:</span>
                            <span class="result-value" id="ex2-ka">1.86 × 10⁻⁵</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Section -->
            <div id="quiz" class="section">
                <h2>🎯 Test Your Knowledge</h2>
                
                <div class="quiz-container">
                    <div class="quiz-question" id="quiz-question">
                        What happens to the van't Hoff factor when an ionic compound completely dissociates in water?
                    </div>
                    
                    <div class="quiz-options" id="quiz-options">
                        <div class="quiz-option" onclick="selectOption(0)">i becomes less than 1</div>
                        <div class="quiz-option" onclick="selectOption(1)">i becomes greater than 1</div>
                        <div class="quiz-option" onclick="selectOption(2)">i remains equal to 1</div>
                        <div class="quiz-option" onclick="selectOption(3)">i becomes zero</div>
                    </div>
                    
                    <button class="btn" onclick="checkAnswer()" id="check-btn">✅ Check Answer</button>
                    <button class="btn" onclick="nextQuestion()" id="next-btn" style="display: none;">➡️ Next Question</button>
                    <button class="btn" onclick="resetQuiz()" id="reset-btn" style="display: none;">🔄 Reset Quiz</button>
                    
                    <div id="quiz-explanation" style="display: none; margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                    </div>
                    
                    <div class="result-item" style="margin-top: 20px;">
                        <span>Progress:</span>
                        <span class="result-value" id="quiz-progress">Question 1 of 5</span>
                    </div>
                    
                    <div class="result-item">
                        <span>Score:</span>
                        <span class="result-value" id="quiz-score">0/0</span>
                    </div>
                    
                    <div id="final-score" style="display: none; margin-top: 20px; padding: 20px; background: linear-gradient(135deg, #00b894, #00cec9); border-radius: 15px; text-align: center; color: white;">
                        <h3>🎉 Quiz Complete!</h3>
                        <p id="final-message">Great job! You've completed all questions.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSection = 'concept';
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let questionsAnswered = 0;
        let selectedOption = -1;
        let animationSpeed = 3;

        const quizQuestions = [
            {
                question: "What happens to the van't Hoff factor when an ionic compound completely dissociates in water?",
                options: ["i becomes less than 1", "i becomes greater than 1", "i remains equal to 1", "i becomes zero"],
                correct: 1,
                explanation: "When ionic compounds dissociate, they produce more particles than originally present, so the van't Hoff factor (i) becomes greater than 1."
            },
            {
                question: "For the complete dissociation of CaCl₂ → Ca²⁺ + 2Cl⁻, what is the theoretical van't Hoff factor?",
                options: ["1", "2", "3", "4"],
                correct: 2,
                explanation: "CaCl₂ produces 3 particles when it completely dissociates (1 Ca²⁺ + 2 Cl⁻), so i = 3."
            },
            {
                question: "What causes abnormal molar mass to be higher than the normal value?",
                options: ["Dissociation", "Association", "Ionization", "Hydration"],
                correct: 1,
                explanation: "Association reduces the number of particles in solution, making the apparent molar mass higher than expected."
            },
            {
                question: "In which solvent does acetic acid typically show association behavior?",
                options: ["Water", "Benzene", "Ethanol", "Acetone"],
                correct: 1,
                explanation: "Acetic acid forms dimers in non-polar solvents like benzene due to hydrogen bonding, showing association behavior."
            },
            {
                question: "If the observed freezing point depression is 0.372 K and calculated value is 0.186 K, what is the van't Hoff factor?",
                options: ["0.5", "1.0", "2.0", "3.0"],
                correct: 2,
                explanation: "i = Observed/Calculated = 0.372/0.186 = 2.0"
            }
        ];

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.add('active');
            
            // Add active class to selected tab
            event.target.classList.add('active');
            
            currentSection = sectionName;
            
            if (sectionName === 'visualization') {
                setTimeout(() => updateVisualization(), 300);
            }
        }

        function updateCalculator() {
            const compoundType = document.getElementById('compound-type').value;
            const concentration = parseFloat(document.getElementById('concentration').value);
            const kf = parseFloat(document.getElementById('kf-value').value);
            const observedDeltaTf = parseFloat(document.getElementById('observed-deltaTf').value);
            
            // Calculate theoretical ΔTf
            const calcDeltaTf = kf * concentration;
            document.getElementById('calc-deltaTf').textContent = calcDeltaTf.toFixed(3) + ' K';
            
            // Calculate van't Hoff factor
            const vantHoffFactor = observedDeltaTf / calcDeltaTf;
            document.getElementById('vant-hoff-factor').textContent = vantHoffFactor.toFixed(2);
            
            // Calculate degree of dissociation based on compound type
            let theoreticalI = 1;
            switch(compoundType) {
                case 'nacl':
                case 'kcl':
                case 'mgso4':
                    theoreticalI = 2;
                    break;
                case 'cacl2':
                    theoreticalI = 3;
                    break;
                case 'k2so4':
                    theoreticalI = 3;
                    break;
                case 'acetic':
                    theoreticalI = 0.5;
                    break;
                default:
                    theoreticalI = 2;
            }
            
            let degreeDissociation;
            if (compoundType === 'acetic') {
                // For association: i = 1 - α/2
                degreeDissociation = 2 * (1 - vantHoffFactor);
                document.getElementById('degree-dissociation').textContent = (degreeDissociation * 100).toFixed(1) + '% (association)';
            } else {
                // For dissociation: i = 1 + α(n-1)
                degreeDissociation = (vantHoffFactor - 1) / (theoreticalI - 1);
                document.getElementById('degree-dissociation').textContent = Math.min(100, degreeDissociation * 100).toFixed(1) + '%';
            }
            
            document.getElementById('effective-particles').textContent = vantHoffFactor.toFixed(2);
        }

        function calculateExample() {
            const compounds = ['nacl', 'kcl', 'cacl2', 'k2so4', 'mgso4'];
            const randomCompound = compounds[Math.floor(Math.random() * compounds.length)];
            const randomConc = (Math.random() * 0.5 + 0.05).toFixed(3);
            
            document.getElementById('compound-type').value = randomCompound;
            document.getElementById('concentration').value = randomConc;
            
            // Generate realistic observed values
            const kf = 1.86;
            const theoretical = kf * randomConc;
            let theoreticalI = 2;
            if (randomCompound === 'cacl2' || randomCompound === 'k2so4') theoreticalI = 3;
            
            const randomFactor = 0.8 + Math.random() * 0.4; // 80-120% of theoretical
            const observed = theoretical * theoreticalI * randomFactor;
            
            document.getElementById('observed-deltaTf').value = observed.toFixed(4);
            updateCalculator();
        }

        function updateVisualization() {
            const processType = document.getElementById('process-type').value;
            const extent = parseInt(document.getElementById('extent-slider').value);
            document.getElementById('extent-value').textContent = extent + '%';
            
            // Update explanation based on process type
            const explanationElement = document.getElementById('process-explanation');
            if (processType === 'dissociation') {
                explanationElement.innerHTML = `
                    <strong>Dissociation Process:</strong> Watch as ionic compounds like KCl break apart in water. Each intact KCl molecule (blue) splits into separate K⁺ (red) and Cl⁻ (green) ions. This increases the total number of particles, making the van't Hoff factor greater than 1. The more molecules that dissociate, the higher the i-factor becomes!
                `;
            } else {
                explanationElement.innerHTML = `
                    <strong>Association Process:</strong> Observe how acetic acid molecules come together in non-polar solvents like benzene. Two individual CH₃COOH molecules (orange) form hydrogen bonds and create dimers (paired molecules). This reduces the total number of particles, making the van't Hoff factor less than 1. More association = lower i-factor!
                `;
            }
            
            const container = document.getElementById('molecule-container');
            container.innerHTML = '';
            
            const totalMolecules = 16; // Increased for better visualization
            let finalParticles;
            
            if (processType === 'dissociation') {
                const dissociatedCount = Math.floor(totalMolecules * extent / 100);
                finalParticles = totalMolecules + dissociatedCount; // Each molecule becomes 2 particles
                
                for (let i = 0; i < totalMolecules; i++) {
                    const molecule = document.createElement('div');
                    molecule.className = 'molecule';
                    
                    if (i < dissociatedCount) {
                        // Dissociated molecules - separate ions
                        molecule.classList.add('dissociated');
                        molecule.innerHTML = `
                            <div class="atom-group">
                                <div class="atom k-ion" data-charge="+">K</div>
                                <div class="atom cl-ion" data-charge="−">Cl</div>
                            </div>
                            <div class="molecule-label">Dissociated</div>
                        `;
                    } else {
                        // Non-dissociated molecules
                        molecule.classList.add('neutral');
                        molecule.innerHTML = `
                            <div class="atom-group">
                                <div class="atom compound">KCl</div>
                            </div>
                            <div class="molecule-label">Intact</div>
                        `;
                    }
                    
                    molecule.style.animationDelay = (i * 0.1) + 's';
                    container.appendChild(molecule);
                }
            } else {
                // Association - acetic acid dimerization
                const associatedPairs = Math.floor(totalMolecules * extent / 200); // Pairs of molecules that associate
                const singleMolecules = totalMolecules - (associatedPairs * 2);
                finalParticles = associatedPairs + singleMolecules;
                
                // Add associated dimers
                for (let i = 0; i < associatedPairs; i++) {
                    const molecule = document.createElement('div');
                    molecule.className = 'molecule associated';
                    molecule.innerHTML = `
                        <div class="atom-group">
                            <div class="atom acetic">CH₃COOH</div>
                            <div class="hydrogen-bond"></div>
                            <div class="atom acetic">CH₃COOH</div>
                        </div>
                        <div class="molecule-label">Dimer</div>
                    `;
                    molecule.style.animationDelay = (i * 0.15) + 's';
                    container.appendChild(molecule);
                }
                
                // Add single molecules
                for (let i = 0; i < singleMolecules; i++) {
                    const molecule = document.createElement('div');
                    molecule.className = 'molecule neutral';
                    molecule.innerHTML = `
                        <div class="atom-group">
                            <div class="atom acetic">CH₃COOH</div>
                        </div>
                        <div class="molecule-label">Monomer</div>
                    `;
                    molecule.style.animationDelay = ((associatedPairs + i) * 0.1) + 's';
                    container.appendChild(molecule);
                }
            }
            
            const vantHoffFactor = finalParticles / totalMolecules;
            const colligativeIncrease = ((vantHoffFactor - 1) * 100).toFixed(0);
            
            document.getElementById('initial-particles').textContent = totalMolecules;
            document.getElementById('final-particles').textContent = Math.round(finalParticles);
            document.getElementById('visual-vant-hoff').textContent = vantHoffFactor.toFixed(2);
            
            if (vantHoffFactor > 1) {
                document.getElementById('colligative-effect').textContent = `${colligativeIncrease}% increase`;
            } else if (vantHoffFactor < 1) {
                document.getElementById('colligative-effect').textContent = `${Math.abs(colligativeIncrease)}% decrease`;
            } else {
                document.getElementById('colligative-effect').textContent = 'No change';
            }
        }

        function updateAnimationSpeed() {
            animationSpeed = parseInt(document.getElementById('speed-slider').value);
            const molecules = document.querySelectorAll('.molecule');
            molecules.forEach(molecule => {
                molecule.style.animationDuration = (4 - animationSpeed + 1) + 's';
            });
        }

        function resetVisualization() {
            document.getElementById('extent-slider').value = 50;
            document.getElementById('speed-slider').value = 3;
            updateVisualization();
        }

        function showNextStep(exampleNum) {
            if (exampleNum === 1) {
                const stepsContainer = document.getElementById('example1-steps');
                const currentSteps = stepsContainer.children.length;
                
                const steps = [
                    {
                        title: "Step 2: Calculate van't Hoff factor",
                        content: "i = Normal molar mass / Abnormal molar mass = 122 / 242 = 0.504"
                    },
                    {
                        title: "Step 3: Set up association equilibrium",
                        content: "2 C₆H₅COOH ⇌ (C₆H₅COOH)₂<br>If x = degree of association, then particles = 1 - x/2"
                    },
                    {
                        title: "Step 4: Solve for degree of association",
                        content: "i = 1 - x/2 = 0.504<br>x/2 = 1 - 0.504 = 0.496<br>x = 0.992 = 99.2%"
                    }
                ];
                
                if (currentSteps < steps.length + 1) {
                    const stepDiv = document.createElement('div');
                    stepDiv.className = 'step';
                    stepDiv.style.cssText = 'margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.2); border-radius: 10px;';
                    stepDiv.innerHTML = `
                        <strong>${steps[currentSteps - 1].title}:</strong>
                        <div class="formula-display" style="background: rgba(255,255,255,0.1); margin: 10px 0;">
                            ${steps[currentSteps - 1].content}
                        </div>
                    `;
                    stepsContainer.appendChild(stepDiv);
                    
                    if (currentSteps === steps.length) {
                        event.target.style.display = 'none';
                    }
                }
            }
        }

        function updateExample2() {
            const volume = parseFloat(document.getElementById('ex2-volume').value);
            const density = parseFloat(document.getElementById('ex2-density').value);
            const deltaTf = parseFloat(document.getElementById('ex2-deltaTf').value);
            
            const mass = volume * density;
            const moles = mass / 60; // Molar mass of acetic acid = 60 g/mol
            const molality = moles / 1; // 1 kg of water
            
            const calcDeltaTf = 1.86 * molality;
            const vantHoff = deltaTf / calcDeltaTf;
            const alpha = vantHoff - 1;
            
            // Calculate Ka
            const concentration = molality;
            const ka = (concentration * alpha * alpha) / (1 - alpha);
            
            document.getElementById('ex2-mass').textContent = mass.toFixed(3) + ' g';
            document.getElementById('ex2-moles').textContent = moles.toFixed(4) + ' mol';
            document.getElementById('ex2-molality').textContent = molality.toFixed(4) + ' m';
            document.getElementById('ex2-vant-hoff').textContent = vantHoff.toFixed(3);
            document.getElementById('ex2-alpha').textContent = (alpha * 100).toFixed(1) + '%';
            document.getElementById('ex2-ka').textContent = ka.toExponential(2);
        }

        function selectOption(optionIndex) {
            // Remove previous selections
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Select current option
            document.querySelectorAll('.quiz-option')[optionIndex].classList.add('selected');
            selectedOption = optionIndex;
        }

        function checkAnswer() {
            if (selectedOption === -1) {
                alert('Please select an answer first!');
                return;
            }
            
            const question = quizQuestions[currentQuestionIndex];
            const options = document.querySelectorAll('.quiz-option');
            
            // Show correct/incorrect
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedOption && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            // Update score
            if (selectedOption === question.correct) {
                quizScore++;
            }
            questionsAnswered++;
            
            // Show explanation
            document.getElementById('quiz-explanation').innerHTML = `
                <strong>Explanation:</strong> ${question.explanation}
            `;
            document.getElementById('quiz-explanation').style.display = 'block';
            
            // Update score display
            document.getElementById('quiz-score').textContent = `${quizScore}/${questionsAnswered}`;
            
            // Hide check button, show next button
            document.getElementById('check-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'inline-block';
        }

        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                const question = quizQuestions[currentQuestionIndex];
                
                document.getElementById('quiz-question').textContent = question.question;
                
                const optionsContainer = document.getElementById('quiz-options');
                optionsContainer.innerHTML = '';
                
                question.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'quiz-option';
                    optionDiv.textContent = option;
                    optionDiv.onclick = () => selectOption(index);
                    optionsContainer.appendChild(optionDiv);
                });
                
                // Reset state
                selectedOption = -1;
                document.getElementById('quiz-explanation').style.display = 'none';
                document.getElementById('check-btn').style.display = 'inline-block';
                document.getElementById('next-btn').style.display = 'none';
                document.getElementById('quiz-progress').textContent = `Question ${currentQuestionIndex + 1} of ${quizQuestions.length}`;
            } else {
                // Quiz completed
                showQuizComplete();
            }
        }

        function showQuizComplete() {
            const percentage = Math.round((quizScore / questionsAnswered) * 100);
            let message = '';
            
            if (percentage >= 80) {
                message = '🌟 Excellent! You have a strong understanding of abnormal molar masses!';
            } else if (percentage >= 60) {
                message = '👍 Good job! You understand the basics well. Review the concepts for even better mastery!';
            } else {
                message = '📚 Keep studying! Review the concept section and try the calculator to strengthen your understanding.';
            }
            
            document.getElementById('final-message').textContent = message;
            document.getElementById('final-score').style.display = 'block';
            document.getElementById('check-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('reset-btn').style.display = 'inline-block';
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            quizScore = 0;
            questionsAnswered = 0;
            selectedOption = -1;
            
            const question = quizQuestions[0];
            document.getElementById('quiz-question').textContent = question.question;
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            document.getElementById('quiz-explanation').style.display = 'none';
            document.getElementById('final-score').style.display = 'none';
            document.getElementById('check-btn').style.display = 'inline-block';
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('reset-btn').style.display = 'none';
            document.getElementById('quiz-progress').textContent = 'Question 1 of 5';
            document.getElementById('quiz-score').textContent = '0/0';
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateCalculator();
            updateVisualization();
            updateExample2();
            
            // Auto-advance visualization
            setInterval(() => {
                if (currentSection === 'visualization') {
                    const slider = document.getElementById('extent-slider');
                    let value = parseInt(slider.value);
                    value = (value + 5) % 101;
                    slider.value = value;
                    updateVisualization();
                }
            }, 2000);
        });
    </script>
</body>
</html>
